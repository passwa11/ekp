/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
define(function(){return function(t){!function(Nt,zt){var h={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:Com_Parameter&&Com_Parameter.Date_format&&Com_Parameter.Date_format.match(/^d.*M.*y.*$/)?"ddd d/M":"ddd M/d",day:Com_Parameter&&Com_Parameter.Date_format&&Com_Parameter.Date_format.match(/^d.*M.*y.*$/)?"ddd d/M":"ddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},t={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Q=Nt.fullCalendar={version:"1.6.4"},tt=Q.views={};function e(t){Nt.extend(!0,h,t)}function i(n,o,t){var r=this;r.options=o,r.render=function A(t){s?b()&&(S(),M(t)):function e(){o.theme?"ui":"fc",n.addClass("fc"),o.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr");o.theme&&n.addClass("ui-widget");s=Nt("<div class='fc-content' style='position:relative'/>").prependTo(n),i=new et(r,o),(a=i.render())&&n.prepend(a);D(o.defaultView),o.handleWindowResize&&Nt(window).resize(x);w()||y()}()},r.destroy=function O(){l&&(_("viewDestroy",l,l,l.element),l.triggerEventDestroy());Nt(window).unbind("resize",x),i.destroy(),s.remove(),n.removeClass("fc fc-rtl ui-widget")},r.refetchEvents=function L(){F(),R()},r.reportEvents=function P(t){m=t,H()},r.reportEventChange=function q(t){k(t)},r.rerenderEvents=k,r.changeView=D,r.select=function Y(t,e,n){l.select(t,e,n===zt||n)},r.unselect=N,r.prev=function B(){C(-1)},r.next=function j(){C(1)},r.prevYear=function I(){at(p,-1),C()},r.nextYear=function X(){at(p,1),C()},r.today=function J(){p=new Date,C()},r.gotoDate=function V(t,e,n){t instanceof Date?p=Pt(t):it(p,t,e,n);C()},r.incrementDate=function $(t,e,n){t!==zt&&at(p,t);e!==zt&&ot(p,e);n!==zt&&At(p,n);C()},r.formatDate=function(t,e){return ct(t,e,o)},r.formatDates=function(t,e,n){return ut(t,e,n,o)},r.getDate=function G(){return Pt(p)},r.getView=function U(){return l},r.option=function Z(t,e){if(e===zt)return o[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(o[t]=e,E())},r.trigger=_,function K(g,t){var e=this;e.isFetchNeeded=function C(t,e){return!p||t<p||m<e},e.fetchEvents=function M(t,e){p=t,m=e,u=[];var n=++i,r=o.length;c=r;for(var a=0;a<r;a++)d(o[a],n)},e.addEventSource=function E(t){(t=v(t))&&(c++,d(t,i))},e.removeEventSource=function S(e){o=Nt.grep(o,function(t){return!h(t,e)}),u=Nt.grep(u,function(t){return!h(t.source,e)}),l(u)},e.updateEvent=function T(t){var e,n,r=u.length,a=s().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=u[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,w(n));w(t),l(u)},e.renderEvent=function x(t,e){w(t),t.source||(e&&(r.events.push(t),t.source=r),u.push(t));l(u)},e.removeEvents=function k(t){if(t){if(!Nt.isFunction(t)){var e=t+"";t=function(t){return t._id==e}}u=Nt.grep(u,t,!0);for(var n=0;n<o.length;n++)Nt.isArray(o[n].events)&&(o[n].events=Nt.grep(o[n].events,t,!0))}else{u=[];for(var n=0;n<o.length;n++)Nt.isArray(o[n].events)&&(o[n].events=[])}l(u)},e.clientEvents=function H(e){{if(Nt.isFunction(e))return Nt.grep(u,e);if(e)return e+="",Nt.grep(u,function(t){return t._id==e})}return u},e.normalizeEvent=w;for(var p,m,n=e.trigger,s=e.getView,l=e.reportEvents,r={events:[]},o=[r],i=0,c=0,a=0,u=[],f=0;f<t.length;f++)v(t[f]);function d(n,r){!function h(t,n){var e;var r=Q.sourceFetchers;var a;for(e=0;e<r.length;e++){if(!0===(a=r[e](t,p,m,n)))return;if("object"==typeof a)return void h(a,n)}var o=t.events;if(o)Nt.isFunction(o)?(y(),o(Pt(p),Pt(m),function(t){n(t),b()})):Nt.isArray(o)?n(o):n();else{var i=t.url;if(i){var s,l=t.success,c=t.error,u=t.complete;s=Nt.isFunction(t.data)?t.data():t.data;var f=Nt.extend({},s||{}),d=dt(t.startParam,g.startParam),v=dt(t.endParam,g.endParam);d&&(f[d]=Math.round(+p/1e3)),v&&(f[v]=Math.round(+m/1e3)),y(),Nt.ajax(Nt.extend({},nt,t,{data:f,success:function(t){t=t||[];var e=ft(l,this,arguments);Nt.isArray(e)&&(t=e),n(t)},error:function(){ft(c,this,arguments),n()},complete:function(){ft(u,this,arguments),b()}}))}else n()}}(n,function(t){if(r==i){if(t){g.eventDataTransform&&(t=Nt.map(t,g.eventDataTransform)),n.eventDataTransform&&(t=Nt.map(t,n.eventDataTransform));for(var e=0;e<t.length;e++)t[e].source=n,w(t[e]);u=u.concat(t)}--c||l(u)}})}function v(t){if(Nt.isFunction(t)||Nt.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t)return function r(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Q.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(t),o.push(t),t}function y(){a++||n("loading",null,!0,s())}function b(){--a||n("loading",null,!1,s())}function w(t){var e=t.source||{},n=dt(e.ignoreTimezone,g.ignoreTimezone);t._id=t._id||(t.id===zt?"_fc"+rt++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=Pt(t.start=st(t.start,n)),t.end=st(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?Pt(t.end):null,t.allDay===zt&&(t.allDay=dt(e.allDayDefault,g.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function h(t,e){return t&&e&&D(t)==D(e)}function D(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(r,o,t);var i,a,s,l,e,c,u,f=r.isFetchNeeded,d=r.fetchEvents,v=n[0],h=0,g=0,p=new Date,m=[];function y(){setTimeout(function(){!l.start&&w()&&C()},0)}function b(){return n.is(":visible")}function w(){return Nt("body").is(":visible")}function D(t){l&&t==l.name||function e(t){g++,l&&(_("viewDestroy",l,l,l.element),N(),l.triggerEventDestroy(),z(),l.element.remove(),i.deactivateButton(l.name));i.activateButton(t),l=new tt[t](Nt("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(s),r),C(),W(),g--}(t)}function C(t){(!l.start||t||p<l.start||p>=l.end)&&b()&&M(t)}function M(t){g++,l.start&&(_("viewDestroy",l,l,l.element),N(),F()),z(),l.render(p,t||0),T(),W(),(l.afterRender||function e(){})(),function n(){i.updateTitle(l.title)}(),function r(){var t=new Date;t>=l.start&&t<l.end?i.disableButton("today"):i.enableButton("today")}(),_("viewRender",l,l,l.element),l.trigger("viewDisplay",v),g--,function a(){!o.lazyFetching||f(l.visStart,l.visEnd)?R():H()}()}function E(){b()&&(N(),F(),S(),T(),H())}function S(){c=o.contentHeight?o.contentHeight:o.height?o.height-(a?a.height():0)-$t(s):Math.round(s.width()/Math.max(o.aspectRatio,.5))}function T(){c===zt&&S(),g++,l.setHeight(c),l.setWidth(s.width()),g--,e=n.outerWidth()}function x(){if(!g)if(l.start){var t=++h;setTimeout(function(){t==h&&!g&&b()&&e!=(e=n.outerWidth())&&(g++,E(),l.trigger("windowResize",v),g--)},200)}else y()}function k(t){F(),H(t)}function H(t){b()&&(l.setEventData(m),l.renderEvents(m,t),l.trigger("eventAfterAllRender"))}function F(){l.triggerEventDestroy(),l.clearEvents(),l.clearEventData()}function R(){d(l.visStart,l.visEnd)}function N(){l&&l.unselect()}function z(){s.css({width:"100%",height:s.height(),overflow:"hidden"})}function W(){s.css({width:"",height:"",overflow:""})}function _(t,e){if(o[t])return o[t].apply(e||v,Array.prototype.slice.call(arguments,2))}it(p,o.year,o.month,o.date),o.droppable&&Nt(document).bind("dragstart",function(t,e){var n=t.target,r=Nt(n);if(!r.parents(".fc").length){var a=o.dropAccept;(Nt.isFunction(a)?a.call(n,r):r.is(a))&&(u=n,l.dragStart(u,t,e))}}).bind("dragstop",function(t,e){u&&(l.dragStop(u,t,e),u=null)})}function et(l,c){var t=this;t.render=function r(){if(u=c.theme?"ui":"fc",c.header)return e=Nt("<table class='fc-header' style='width:100%'/>").append(Nt("<tr/>").append(n("left")).append(n("center")).append(n("right")))},t.destroy=function a(){e.remove()},t.updateTitle=function o(t){e.find("h2").html(t)},t.activateButton=function i(t){e.find("span.fc-button-"+t).addClass(u+"-state-active")},t.deactivateButton=function s(t){e.find("span.fc-button-"+t).removeClass(u+"-state-active")},t.disableButton=function f(t){e.find("span.fc-button-"+t).addClass(u+"-state-disabled")},t.enableButton=function d(t){e.find("span.fc-button-"+t).removeClass(u+"-state-disabled")};var u,e=Nt([]);function n(t){var s=Nt("<td class='fc-header-"+t+"'/>"),e=c.header[t];return e&&Nt.each(e.split(" "),function(t){var i;0<t&&s.append("<span class='fc-header-space'/>"),Nt.each(this.split(","),function(t,e){var n;if("title"==e)s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(u+"-corner-right"),i=null;else if(l[e]?n=l[e]:tt[e]&&(n=function(){o.removeClass(u+"-state-hover"),l.changeView(e)}),n){var r=c.theme?J(c.buttonIcons,e):null,a=J(c.buttonText,e),o=Nt("<span class='fc-button fc-button-"+e+" "+u+"-state-default'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":a)+"</span>").click(function(){o.hasClass(u+"-state-disabled")||n()}).mousedown(function(){o.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){o.removeClass(u+"-state-down")}).hover(function(){o.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){o.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(s);Zt(o),i||o.addClass(u+"-corner-left"),i=o}}),i&&i.addClass(u+"-corner-right")}),s}}Nt.fn.fullCalendar=function(a){if("string"==typeof a){var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=Nt.data(this,"fullCalendar");if(t&&Nt.isFunction(t[a])){var e=t[a].apply(t,r);n===zt&&(n=e),"destroy"==a&&Nt.removeData(this,"fullCalendar")}}),n!==zt?n:this}var o=(a=a||{}).eventSources||[];return delete a.eventSources,a.events&&(o.push(a.events),delete a.events),a=Nt.extend(!0,{},h,a.isRTL||a.isRTL===zt&&h.isRTL?t:{},a),this.each(function(t,e){var n=Nt(e),r=new i(n,a,o);n.data("fullCalendar",r),r.render()}),this},Q.sourceNormalizers=[];var nt={dataType:"json",cache:!(Q.sourceFetchers=[])},rt=1;Q.addDays=At,Q.cloneDate=Pt,Q.parseDate=st,Q.parseISO8601=lt,Q.parseTime=Bt,Q.formatDate=ct,Q.formatDates=ut;var Wt=["sun","mon","tue","wed","thu","fri","sat"],n=864e5,r=36e5,_t=6e4;function at(t,e,n){return t.setFullYear(t.getFullYear()+e),n||Lt(t),t}function ot(t,e,n){if(+t){var r=t.getMonth()+e,a=Pt(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||Lt(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function At(t,e,n){if(+t){var r=t.getDate()+e,a=Pt(t);a.setHours(9),a.setDate(r),t.setDate(r),n||Lt(t),s(t,a)}return t}function s(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*r)}function Ot(t,e){return t.setMinutes(t.getMinutes()+e),t}function Lt(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Pt(t,e){return e?Lt(new Date(+t)):new Date(+t)}function qt(){for(var t,e=0;(t=new Date(1970,e++,1)).getHours(););return t}function Yt(t,e){return Math.round((Pt(t,!0)-Pt(e,!0))/n)}function it(t,e,n,r){e!==zt&&e!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(e)),n!==zt&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),r!==zt&&t.setDate(r)}function st(t,e){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):Com_Parameter.Date_format.match(/^d.*M.*y.*$/)?Com_GetDate(t):(e===zt&&(e=!0),lt(t,e)||(t?new Date(t):null)):null}function lt(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),s(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),s(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function Bt(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function ct(t,e,n){return ut(t,null,e,n)}function ut(t,e,n,r){r=r||h;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;a<u;a++)if("'"==(o=n.charAt(a))){for(i=a+1;i<u;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;i<u;i++)if(")"==n.charAt(i)){var d=ct(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;i<u;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i);(d=ct(l,v,r))!=ct(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;a<i;i--)if(s=g[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}var g={s:function(t){return t.getSeconds()},ss:function(t){return a(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return a(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return a(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return a(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return a(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return a(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return ct(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return 10<e&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return function r(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}(t)}};function jt(t){return t.end?function n(t,e){return t=Pt(t),e||t.getHours()||t.getMinutes()?At(t,1):Lt(t)}(t.end,t.allDay):At(Pt(t.start),1)}function It(t,o,i){t.unbind("mouseover").mouseover(function(t){for(var e,n,r,a=t.target;a!=this;)a=(e=a).parentNode;(n=e._fci)!==zt&&(e._fci=zt,r=o[n],i(r.event,r.element,r),Nt(t.target).trigger(t)),t.stopPropagation()})}function Xt(t,e,n){for(var r,a=0;a<t.length;a++)(r=Nt(t[a])).width(Math.max(0,e-Vt(r,n)))}function Jt(t,e,n){for(var r,a=0;a<t.length;a++)(r=Nt(t[a])).height(Math.max(0,e-$t(r,n)))}function Vt(t,e){return function n(t){return(parseFloat(Nt.css(t[0],"paddingLeft",!0))||0)+(parseFloat(Nt.css(t[0],"paddingRight",!0))||0)}(t)+function r(t){return(parseFloat(Nt.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(Nt.css(t[0],"borderRightWidth",!0))||0)}(t)+(e?function a(t){return(parseFloat(Nt.css(t[0],"marginLeft",!0))||0)+(parseFloat(Nt.css(t[0],"marginRight",!0))||0)}(t):0)}function $t(t,e){return function n(t){return(parseFloat(Nt.css(t[0],"paddingTop",!0))||0)+(parseFloat(Nt.css(t[0],"paddingBottom",!0))||0)}(t)+function r(t){return(parseFloat(Nt.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(Nt.css(t[0],"borderBottomWidth",!0))||0)}(t)+(e?function a(t){return(parseFloat(Nt.css(t[0],"marginTop",!0))||0)+(parseFloat(Nt.css(t[0],"marginBottom",!0))||0)}(t):0)}function Gt(t,e){return t-e}function q(t){return Math.max.apply(Math,t)}function a(t){return(t<10?"0":"")+t}function J(t,e){if(t[e]!==zt)return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;0<=a;a--)if((n=t[r[a].toLowerCase()])!==zt)return n;return t[""]}function Ut(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Zt(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Kt(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Qt(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function ft(t,e,n){if(Nt.isFunction(t)&&(t=[t]),t){var r,a;for(r=0;r<t.length;r++)a=t[r].apply(e,n)||a;return a}}function dt(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==zt)return arguments[t]}function p(i,t,e){var s=this;s.renderBasic=function j(t,e,n){y=t,b=e,w=n,function r(){E=H("theme")?"ui":"fc",S=H("columnFormat"),T=H("weekNumbers"),x=H("weekNumberTitle"),k="iso"!=H("weekNumberCalculation")?"w":"W"}(),f||function a(){m=Nt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(i)}();!function o(){var t=function e(){return"<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function a(){var t,e,n=E+"-widget-header",r="";r+="<thead><tr>",T&&(r+="<th class='fc-week-number "+n+"'>"+Ut(x)+"</th>");for(t=0;t<b;t++)e=W(0,t),r+="<th class='fc-day-header fc-"+Wt[e.getDay()]+" "+n+"'>"+Ut(O(e,S))+"</th>";return r+="</tr></thead>"}()+function o(){var t,e,n,r=E+"-widget-content",a="";for(a+="<tbody>",t=0;t<y;t++){for(a+="<tr class='fc-week'>",T&&(n=W(t,0),a+="<td class='fc-week-number "+r+"'><div>"+Ut(O(n,k))+"</div></td>"),e=0;e<b;e++)n=W(t,e),a+=L(n);a+="</tr>"}return a+="</tbody>"}()+"</table>"}();l&&l.remove();l=Nt(t).appendTo(i),c=l.find("thead"),u=c.find(".fc-day-header"),f=l.find("tbody"),d=f.find("tr"),v=f.find(".fc-day"),h=d.find("td:first-child"),g=d.eq(0).find(".fc-day > div"),p=d.eq(0).find(".fc-day-content > div"),Kt(c.add(c.find("tr"))),Kt(d),d.eq(0).addClass("fc-first"),d.filter(":last").addClass("fc-last"),v.each(function(t,e){var n=W(Math.floor(t/b),t%b);F("dayRender",s,n,Nt(e))}),P(v)}()},s.setHeight=function I(t){var n,r,a,e=t-c.height();"variable"==H("weekMode")?n=r=Math.floor(e/(1==y?2:6)):(n=Math.floor(e/y),r=e-n*(y-1));h.each(function(t,e){t<y&&(a=Nt(e)).find("> div").css("min-height",(t==y-1?r:n)-$t(a))})},s.setWidth=function X(t){n=t,C.clear(),M.clear(),a=0,T&&(a=c.find("th.fc-week-number").outerWidth());r=Math.floor((n-a)/b),Xt(u.slice(0,-1),r)},s.renderDayOverlay=Y,s.defaultSelectionEnd=function J(t,e){return Pt(t)},s.renderSelection=function V(t,e,n){Y(t,At(Pt(e),1),!0)},s.clearSelection=function $(){N()},s.reportDayClick=function G(t,e,n){var r=_(t),a=v[r.row*b+r.col];F("dayClick",a,t,e,n)},s.dragStart=function U(t,e,n){o.start(function(t){N(),t&&B(t.row,t.col,t.row,t.col)},e)},s.dragStop=function Z(t,e,n){var r=o.stop();if(N(),r){var a=W(r);F("drop",t,a,!0,e,n)}},s.defaultEventEnd=function K(t){return Pt(t.start)},s.getHoverListener=function(){return o},s.colLeft=function Q(t){return C.left(t)},s.colRight=function tt(t){return C.right(t)},s.colContentLeft=function et(t){return M.left(t)},s.colContentRight=function nt(t){return M.right(t)},s.getIsCellAllDay=function(){return!0},s.allDayRow=function rt(t){return d.eq(t)},s.getRowCnt=function(){return y},s.getColCnt=function(){return b},s.getColWidth=function(){return r},s.getDaySegmentContainer=function(){return m},ne.call(s,i,t,e),oe.call(s),ae.call(s),function at(){var n=this;n.renderEvents=function r(t,e){n.renderDayEvents(t,e)},n.clearEvents=function t(){n.getDaySegmentContainer().empty()},re.call(n)}.call(s);var l,c,u,f,d,v,h,g,p,m,n,r,a,y,b,w,D,o,C,M,E,S,T,x,k,H=s.opt,F=s.trigger,R=s.renderOverlay,N=s.clearOverlays,z=s.daySelectionMousedown,W=s.cellToDate,_=s.dateToCell,A=s.rangeToSegments,O=t.formatDate;function L(t){var e=E+"-widget-content",n=s.start.getMonth(),r=Lt(new Date),a="",o=["fc-day","fc-"+Wt[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",E+"-state-highlight"):t<r?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"' data-date='"+O(t,"yyyy-MM-dd")+"'><div>",w&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function P(t){t.click(q).mousedown(z)}function q(t){if(!H("selectable")){var e=lt(Nt(this).data("date"));F("dayClick",this,e,!0,t)}}function Y(t,e,n){n&&D.build();for(var r=A(t,e),a=0;a<r.length;a++){var o=r[a];P(B(o.row,o.leftCol,o.row,o.rightCol))}}function B(t,e,n,r){var a=D.rect(t,e,n,r,i);return R(a,i)}Zt(i.addClass("fc-grid")),D=new ie(function(n,r){var a,o,i;u.each(function(t,e){a=Nt(e),o=a.offset().left,t&&(i[1]=o),i=[o],r[t]=i}),i[1]=o+a.outerWidth(),d.each(function(t,e){t<y&&(a=Nt(e),o=a.offset().top,t&&(i[1]=o),i=[o],n[t]=i)}),i[1]=o+a.outerHeight()}),o=new se(D),C=new le(function(t){return g.eq(t)}),M=new le(function(t){return p.eq(t)})}function m(c,t,e){var n=this;n.renderAgenda=function mt(t){F=t,function e(){A=I("theme")?"ui":"fc",O=I("isRTL"),L=Bt(I("minTime")),P=Bt(I("maxTime")),q=I("columnFormat"),Y=I("weekNumbers"),B=I("weekNumberTitle"),j="iso"!=I("weekNumberCalculation")?"w":"W",x=I("snapMinutes")||I("slotMinutes")}(),i?rt():function l(){var t,e,n,r,a,o=A+"-widget-header",i=A+"-widget-content",s=I("slotMinutes")%15==0;rt(),v=Nt("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c),I("allDaySlot")?(h=Nt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(v),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+I("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+o+" fc-agenda-gutter'>&nbsp;</th></tr></table>",g=Nt(t).appendTo(v),at((p=g.find("tr")).find("td")),v.append("<div class='fc-agenda-divider "+o+"'><div class='fc-agenda-divider-inner'/></div>")):h=Nt([]);for(m=Nt("<div style='position:absolute;width:99.9%;overflow-x:hidden;overflow-y:auto'/>").appendTo(v),y=Nt("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(m),b=Nt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(y),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",e=qt(),r=Ot(Pt(e),P),Ot(e,L),n=R=0;e<r;n++)a=e.getMinutes(),t+="<tr class='fc-slot"+n+" "+(a?"fc-minor":"")+"'><th class='fc-agenda-axis "+o+"'>"+(s&&a?"&nbsp;":et(e,I("axisFormat")))+"</th><td class='"+i+"'><div style='position:relative'>&nbsp;</div></td></tr>",Ot(e,I("slotMinutes")),R++;ot((w=Nt(t+="</tbody></table>").appendTo(y)).find("td"))}()},n.setWidth=function yt(t){t,W.clear(),_.clear();var e=a.find("th:first");g&&(e=e.add(g.find("th:first")));e=e.add(w.find("th:first")),M=0,Xt(e.width("").each(function(t,e){M=Math.max(M,Nt(e).outerWidth())}),M);var n=i.find(".fc-agenda-gutter");g&&(n=n.add(g.find("th.fc-agenda-gutter")));var r=m[0].clientWidth;(S=m.width()-r)?(Xt(n,S),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last");E=Math.floor((r-M)/F),Xt(u.slice(0,-1),E)},n.setHeight=function bt(t){t===zt&&(t=C);C=t,nt={};var e=o.position().top,n=m.position().top,r=Math.min(t-e,w.height()+n+1);d.height(r-$t(f)),v.css("top",e),m.height(r-n-1),T=w.find("tr:first").height()+1,k=I("slotMinutes")/x,H=T/k},n.afterRender=function wt(){!function a(){var t=qt(),e=Pt(t);e.setHours(I("firstHour"));var n=dt(t,e)+1;function r(){m.scrollTop(n)}r(),setTimeout(r,0)}()},n.defaultEventEnd=function Dt(t){var e=Pt(t.start);if(t.allDay)return e;return Ot(e,I("defaultEventMinutes"))},n.timePosition=dt,n.getIsCellAllDay=ut,n.allDayRow=function Ct(t){return p},n.getCoordinateGrid=function(){return N},n.getHoverListener=function(){return z},n.colLeft=function Mt(t){return W.left(t)},n.colRight=function Et(t){return W.right(t)},n.colContentLeft=function St(t){return _.left(t)},n.colContentRight=function Tt(t){return _.right(t)},n.getDaySegmentContainer=function(){return h},n.getSlotSegmentContainer=function(){return b},n.getMinMinute=function(){return L},n.getMaxMinute=function(){return P},n.getSlotContainer=function(){return y},n.getRowCnt=function(){return 1},n.getColCnt=function(){return F},n.getColWidth=function(){return E},n.getSnapHeight=function(){return H},n.getSnapMinutes=function(){return x},n.defaultSelectionEnd=function xt(t,e){if(e)return Pt(t);return Ot(Pt(t),I("slotMinutes"))},n.renderDayOverlay=st,n.renderSelection=function kt(t,e,n){n?I("allDaySlot")&&st(t,At(Pt(e),1),!0):vt(t,e)},n.clearSelection=ht,n.reportDayClick=pt,n.dragStart=function Ht(t,e,n){z.start(function(t){if(V(),t)if(ut(t))lt(t.row,t.col,t.row,t.col);else{var e=ft(t),n=Ot(Pt(e),I("defaultEventMinutes"));ct(e,n)}},e)},n.dragStop=function Ft(t,e,n){var r=z.stop();V(),r&&X("drop",t,ft(r),ut(r),e,n)},ne.call(n,c,t,e),oe.call(n),ae.call(n),function Rt(){var S=this;S.renderEvents=function m(t,e){var n,r=t.length,a=[],o=[];for(n=0;n<r;n++)t[n].allDay?a.push(t[n]):o.push(t[n]);T("allDaySlot")&&(c(a,e),l());!function C(t,e){var n,r,a,o,i,s,l,c,u,f,d,v,h,g,p,m,y=t.length,b="",w=M(),D=T("isRTL");for(n=0;n<y;n++)r=t[n],a=r.event,o=E(r.start,r.start),i=E(r.start,r.end),s=H(r.col),l=F(r.col),u=(c=(l-=.025*(c=l-s))-s)*(r.forwardCoord-r.backwardCoord),T("slotEventOverlap")&&(u=Math.max(2*(u-10),u)),D?(d=l-r.backwardCoord*c,f=d-u):(f=s+r.backwardCoord*c,d=f+u),f=Math.max(f,s),d=Math.min(d,l),u=d-f,r.top=o,r.left=f,r.outerWidth=u,r.outerHeight=i-o,b+=I(a,r);for(w[0].innerHTML=b,v=w.children(),n=0;n<y;n++)r=t[n],a=r.event,h=Nt(v[n]),!1===(g=x("eventRender",a,a,h))?h.remove():(g&&!0!==g&&(h.remove(),h=Nt(g).css({position:"absolute",top:r.top,left:r.left}).appendTo(w)),r.element=h,a._id===e?X(a,h,r):h[0]._fci=n,A(a,h));for(It(w,t,X),n=0;n<y;n++)r=t[n],(h=r.element)&&(r.vsides=$t(h,!0),r.hsides=Vt(h,!0),(p=h.find(".fc-event-title")).length&&(r.contentTop=p[0].offsetTop));for(n=0;n<y;n++)r=t[n],(h=r.element)&&(h[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",m=Math.max(0,r.outerHeight-r.vsides),h[0].style.height=m+"px",a=r.event,r.contentTop!==zt&&m-r.contentTop<10&&(h.find("div.fc-event-time").text(B(a.start,T("timeFormat"))+" - "+a.title),h.find("div.fc-event-title").remove()),x("eventAfterRender",a,a,h))}(function f(t){var e,n,r,a,o,i=N(),s=g(),l=d(),c=Nt.map(t,h),u=[];for(n=0;n<i;n++)for(Ot(e=R(0,n),s),o=te(o=v(t,c,e,Ot(Pt(e),l-s))),r=0;r<o.length;r++)(a=o[r]).col=n,u.push(a);return u}(o),e)},S.clearEvents=function r(){t().empty(),M().empty()},S.slotSegHtml=I,re.call(S);var T=S.opt,x=S.trigger,i=S.isEventDraggable,s=S.isEventResizable,u=S.eventEnd,a=S.eventElementHandlers,l=S.setHeight,t=S.getDaySegmentContainer,M=S.getSlotSegmentContainer,e=S.getHoverListener,d=S.getMaxMinute,g=S.getMinMinute,E=S.timePosition,k=S.getIsCellAllDay,H=S.colContentLeft,F=S.colContentRight,R=S.cellToDate,N=S.getColCnt,z=S.getColWidth,W=S.getSnapHeight,_=S.getSnapMinutes,p=S.getSlotContainer,A=S.reportEventElement,O=S.showEvents,L=S.hideEvents,P=S.eventDrop,f=S.eventResize,q=S.renderDayOverlay,Y=S.clearOverlays,c=S.renderDayEvents,n=S.calendar,B=n.formatDate,j=n.formatDates;function v(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],v=t.length;for(a=0;a<v;a++)o=t[a],i=o.start,s=e[a],n<s&&i<r&&(u=i<n?(l=Pt(n),!1):(l=i,!0),f=r<s?(c=Pt(r),!1):(c=s,!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(ee)}function h(t){return t.end?Pt(t.end):Ot(Pt(t.start),T("defaultEventMinutes"))}function I(t,e){var n="<",r=t.url,a=Qt(t,T),o=["fc-event","fc-event-vert"];return i(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+Ut(t.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Ut(j(t.start,t.end,T("timeFormat")))+"</div><div class='fc-event-title'>"+Ut(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&s(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function X(t,e,n){var r=e.find("div.fc-event-time");i(t)&&function E(a,i,o){var s,l,c,u,f,d,v,h,g,p,m,y=S.getCoordinateGrid(),b=N(),w=z(),D=W(),C=_();function M(){Y(),c&&(f?(o.hide(),i.draggable("option","grid",null),q(At(Pt(a.start),g),At(jt(a),g))):(!function r(t){var e,n=Ot(Pt(a.start),t);a.end&&(e=Ot(Pt(a.end),t));o.text(j(n,e,T("timeFormat")))}(p),o.css("display",""),i.draggable("option","grid",[w,D])))}i.draggable({scroll:!1,grid:[w,D],axis:1==b&&"y",opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(t,e){x("eventDragStart",i,a,t,e),L(a,i),y.build(),s=i.position(),l=y.cell(t.pageX,t.pageY),c=u=!0,f=d=k(l),v=h=0,p=m=g=0},drag:function(t,e){var n=y.cell(t.pageX,t.pageY);if(c=!!n){if(f=k(n),(v=Math.round((e.position.left-s.left)/w))!=h){var r=R(0,l.col),a=l.col+v;a=Math.max(0,a),a=Math.min(b-1,a);var o=R(0,a);g=Yt(o,r)}f||(p=Math.round((e.position.top-s.top)/D)*C)}c==u&&f==d&&v==h&&p==m||(M(),u=c,d=f,h=v,m=p),i.draggable("option","revert",!c)},stop:function(t,e){Y(),x("eventDragStop",i,a,t,e),c&&(f||g||p)?P(this,a,g,f?0:p,f,t,e):(f=!(c=!0),p=g=v=0,M(),i.css("filter",""),i.css(s),O(a,i))}})}(t,e,r),n.isEnd&&s(t)&&function c(n,r,a){var o,i,s=W(),l=_();r.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(t,e){o=i=0,L(n,r),x("eventResizeStart",this,n,t,e)},resize:function(t,e){(o=Math.round((Math.max(s,r.height())-e.originalSize.height)/s))!=i&&(a.text(j(n.start,o||n.end?Ot(u(n),l*o):null,T("timeFormat"))),i=o)},stop:function(t,e){x("eventResizeStop",this,n,t,e),o?f(this,n,0,l*o,t,e):O(n,r)}})}(t,e,r),a(t,e)}S.draggableDayEvent=function y(a,o,t){var n,i,s,l=t.isStart,c=!0,r=e(),u=z(),f=W(),d=_(),v=g();function h(){c||(o.width(n).height("").draggable("option","grid",null),c=!0)}o.draggable({opacity:T("dragOpacity","month"),revertDuration:T("dragRevertDuration"),start:function(t,e){x("eventDragStart",o,a,t,e),L(a,o),n=o.width(),r.start(function(t,e){if(Y(),t){i=!1;var n=R(0,e.col),r=R(0,t.col);s=Yt(r,n),t.row?l?c&&(o.width(u-10),Jt(o,f*Math.round((a.end?(a.end-a.start)/_t:T("defaultEventMinutes"))/d)),o.draggable("option","grid",[u,1]),c=!1):i=!0:(q(At(Pt(a.start),s),At(jt(a),s)),h()),i=i||c&&!s}else h(),i=!0;o.draggable("option","revert",i)},t,"drag")},stop:function(t,e){if(r.stop(),Y(),x("eventDragStop",o,a,t,e),i)h(),o.css("filter",""),O(a,o);else{var n=0;c||(n=Math.round((o.offset().top-p().offset().top)/f)*d+v-(60*a.start.getHours()+a.start.getMinutes())),P(this,a,s,n,c,t,e)}}})}}.call(n);var i,a,u,o,s,r,l,f,d,v,h,g,p,m,y,b,w,D,C,M,E,S,T,x,k,H,F,R,N,z,W,_,A,O,L,P,q,Y,B,j,I=n.opt,X=n.trigger,J=n.renderOverlay,V=n.clearOverlays,$=n.reportSelection,G=n.unselect,U=n.daySelectionMousedown,Z=n.slotSegHtml,K=n.cellToDate,Q=n.dateToCell,tt=n.rangeToSegments,et=t.formatDate,nt={};function rt(){var t=function e(){return"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function o(){var t,e,n,r=A+"-widget-header",a="";a+="<thead><tr>",Y?(t=K(0,0),e=et(t,j),O?e+=B:e=B+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+Ut(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>";for(n=0;n<F;n++)t=K(0,n),a+="<th class='fc-"+Wt[t.getDay()]+" fc-col"+n+" "+r+"'>"+Ut(et(t,q))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}()+function c(){var t,e,n,r,a,o=A+"-widget-header",i=A+"-widget-content",s=Lt(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;e<F;e++)t=K(0,e),a=["fc-col"+e,"fc-"+Wt[t.getDay()],i],+t==+s?a.push(A+"-state-highlight","fc-today"):t<s?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody>"}()+"</table>"}();i&&i.remove(),i=Nt(t).appendTo(c),a=i.find("thead"),u=a.find("th").slice(1,-1),o=i.find("tbody"),s=o.find("td").slice(0,-1),r=s.find("> div"),l=s.find(".fc-day-content > div"),f=s.eq(0),d=r.eq(0),Kt(a.add(a.find("tr"))),Kt(o.add(o.find("tr")))}function at(t){t.click(it).mousedown(U)}function ot(t){t.click(it).mousedown(gt)}function it(t){if(!I("selectable")){var e=Math.min(F-1,Math.floor((t.pageX-i.offset().left-M)/E)),n=K(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*I("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+L),X("dayClick",s[e],n,!1,t)}else X("dayClick",s[e],n,!0,t)}}function st(t,e,n){n&&N.build();for(var r=tt(t,e),a=0;a<r.length;a++){var o=r[a];at(lt(o.row,o.leftCol,o.row,o.rightCol))}}function lt(t,e,n,r){var a=N.rect(t,e,n,r,v);return J(a,v)}function ct(t,e){for(var n=0;n<F;n++){var r=K(0,n),a=At(Pt(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var s=N.rect(0,n,0,n,y),l=dt(r,o),c=dt(r,i);s.top=l,s.height=c-l,ot(J(s,y))}}}function ut(t){return I("allDaySlot")&&!t.row}function ft(t){var e=K(0,t.col),n=t.row;return I("allDaySlot")&&n--,0<=n&&Ot(e,L+n*x),e}function dt(t,e){if(e<Ot(Pt(t=Pt(t,!0)),L))return 0;if(e>=Ot(Pt(t),P))return w.height();var n=I("slotMinutes"),r=60*e.getHours()+e.getMinutes()-L,a=Math.floor(r/n),o=nt[a];return o===zt&&(o=nt[a]=w.find("tr").eq(a).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+T*(r%n/n)))}function vt(t,e){var n=I("selectHelper");if(N.build(),n){var r=Q(t).col;if(0<=r&&r<F){var a=N.rect(0,r,0,r,y),o=dt(t,t),i=dt(t,e);if(o<i){if(a.top=o,a.height=i-o,a.left+=2,a.width-=5,Nt.isFunction(n)){var s=n(t,e);s&&(a.position="absolute",D=Nt(s).css(a).appendTo(y))}else a.isStart=!0,a.isEnd=!0,(D=Nt(Z({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},a))).css("opacity",I("dragOpacity"));D&&(ot(D),y.append(D),Xt(D,a.width,!0),Jt(D,a.height,!0))}}}else ct(t,e)}function ht(){V(),D&&(D.remove(),D=null)}function gt(t){var a;1==t.which&&I("selectable")&&(G(t),z.start(function(t,e){if(ht(),t&&t.col==e.col&&!ut(t)){var n=ft(e),r=ft(t);vt((a=[n,Ot(Pt(n),x),r,Ot(Pt(r),x)].sort(Gt))[0],a[3])}else a=null},t),Nt(document).one("mouseup",function(t){z.stop(),a&&(+a[0]==+a[1]&&pt(a[0],!1,t),$(a[0],a[3],!1,t))}))}function pt(t,e,n){X("dayClick",s[Q(t).col],t,e,n)}Zt(c.addClass("fc-agenda")),N=new ie(function(t,n){var r,a,o;u.each(function(t,e){r=Nt(e),a=r.offset().left,t&&(o[1]=a),o=[a],n[t]=o}),o[1]=a+r.outerWidth(),I("allDaySlot")&&(a=(r=p).offset().top,t[0]=[a,a+r.outerHeight()]);var e=y.offset().top,i=m.offset().top,s=i+m.outerHeight();function l(t){return Math.max(i,Math.min(s,t))}for(var c=0;c<R*k;c++)t.push([l(e+H*c),l(e+H*(c+1))])}),z=new se(N),W=new le(function(t){return r.eq(t)}),_=new le(function(t){return l.eq(t)})}function te(t){var e,n=function o(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&u(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),r=n[0];if(function i(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)u(a,t[o],a.forwardSegs)}(n),r){for(e=0;e<r.length;e++)l(r[e]);for(e=0;e<r.length;e++)c(r[e],0,0)}return function s(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}(n)}function l(t){var e,n,r=t.forwardSegs,a=0;if(t.forwardPressure===zt){for(e=0;e<r.length;e++)l(n=r[e]),a=Math.max(a,1+n.forwardPressure);t.forwardPressure=a}}function c(t,e,n){var r,a=t.forwardSegs;if(t.forwardCoord===zt)for(a.length?(a.sort(o),c(a[0],e+1,n),t.forwardCoord=a[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),r=0;r<a.length;r++)c(a[r],0,t.forwardCoord)}function u(t,e,n){n=n||[];for(var r=0;r<e.length;r++)a=t,o=e[r],a.end>o.start&&a.start<o.end&&n.push(e[r]);var a,o;return n}function o(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ee(t,e)}function ee(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ne(t,n,r){var b=this;b.element=t,b.calendar=n,b.name=r,b.opt=o,b.trigger=f,b.isEventDraggable=function H(t){var e=t.source||{};return dt(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")},b.isEventResizable=function F(t){var e=t.source||{};return dt(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")},b.setEventData=function R(t){u={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],u[n._id]?u[n._id].push(n):u[n._id]=[n]},b.clearEventData=function N(){u={},i={},a=[]},b.eventEnd=d,b.reportEventElement=function z(t,e){a.push({event:t,element:e}),i[t._id]?i[t._id].push(e):i[t._id]=[e]},b.triggerEventDestroy=function W(){Nt.each(a,function(t,e){b.trigger("eventDestroy",e.event,e.event,e.element)})},b.eventElementHandlers=function _(e,n){n.click(function(t){if(!n.hasClass("ui-draggable-dragging")&&!n.hasClass("ui-resizable-resizing"))return f("eventClick",this,e,t)}).hover(function(t){f("eventMouseover",this,e,t)},function(t){f("eventMouseout",this,e,t)})},b.showEvents=function A(t,e){v(t,e,"show")},b.hideEvents=function O(t,e){v(t,e,"hide")},b.eventDrop=function L(t,e,n,r,a,o,i){var s=e.allDay,l=e._id;h(u[l],n,r,a),f("eventDrop",t,e,n,r,a,function(){h(u[l],-n,-r,s),c(l)},o,i),c(l)},b.eventResize=function P(t,e,n,r,a,o){var i=e._id;g(u[i],n,r),f("eventResize",t,e,n,r,function(){g(u[i],-n,-r),c(i)},a,o),c(i)};var e=b.defaultEventEnd,s=n.normalizeEvent,c=n.reportEventChange,u={},i={},a=[],l=n.options;function o(t,e){var n=l[t];return Nt.isPlainObject(n)?J(n,e||r):n}function f(t,e){return n.trigger.apply(n,[t,e||b].concat(Array.prototype.slice.call(arguments,2),[b]))}function d(t){return t.end?Pt(t.end):e(t)}function v(t,e,n){var r,a=i[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function h(t,e,n,r){n=n||0;for(var a,o=t.length,i=0;i<o;i++)a=t[i],r!==zt&&(a.allDay=r),Ot(At(a.start,e,!0),n),a.end&&(a.end=Ot(At(a.end,e,!0),n)),s(a,l)}function g(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=Ot(At(d(r),e,!0),n),s(r,l)}b.isHiddenDay=function q(t){"object"==typeof t&&(t=t.getDay());return y[t]},b.skipHiddenDays=function Y(t,e,n){e=e||1;for(;y[(t.getDay()+(n?e:0)+7)%7];)At(t,e)},b.getCellsPerWeek=function B(){return p},b.dateToCell=function j(t){return k(x(T(t)))},b.dateToDayOffset=T,b.dayOffsetToCellOffset=x,b.cellOffsetToCell=k,b.cellToDate=function I(){return S(E(M.apply(null,arguments)))},b.cellToCellOffset=M,b.cellOffsetToDayOffset=E,b.dayOffsetToDate=S,b.rangeToSegments=function X(t,e){for(var n=b.getRowCnt(),r=b.getColCnt(),a=[],o=T(t),i=T(e),s=x(o),l=x(i)-1,c=0;c<n;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(d<=v){var h=k(d),g=k(v),p=[h.col,g.col].sort(),m=E(d)==o,y=E(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a};var p,m=o("hiddenDays")||[],y=[],w=[],D=[],C=o("isRTL");function M(t,e){var n=b.getColCnt(),r=C?-1:1,a=C?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function E(t){var e=b.visStart.getDay();return t+=w[e],7*Math.floor(t/p)+D[(t%p+p)%p]-e}function S(t){var e=Pt(b.visStart);return At(e,t),e}function T(t){return Yt(t,b.visStart)}function x(t){var e=b.visStart.getDay();return t+=e,Math.floor(t/7)*p+w[(t%7+7)%7]-w[e]}function k(t){var e=b.getColCnt(),n=C?-1:1,r=C?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}!function(){!1===o("weekends")&&m.push(0,6);for(var t=0,e=0;t<7;t++)w[t]=e,y[t]=-1!=Nt.inArray(t,m),y[t]||(D[e]=t,e++);if(!(p=e))throw"invalid hiddenDays"}()}function re(){var r=this;r.renderDayEvents=function P(t,e){var n=_(t,!1,!0);B(n,function(t,e){a(t.event,e)}),function r(t,a){var e=T();B(t,function(t,e,n){var r=t.event;r._id===a?v(r,e,t):e[0]._fci=n}),It(e,t,v)}(n,e),B(n,function(t,e){g("eventAfterRender",t.event,t.event,e)})},r.draggableDayEvent=function t(i,s){var l,n=F();s.draggable({delay:50,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(t,e){g("eventDragStart",s,i,t,e),y(i,s),n.start(function(t,e,n,r){if(s.draggable("option","revert",!t||!n&&!r),k(),t){var a=f(e),o=f(t);l=Yt(o,a),x(At(Pt(i.start),l),At(jt(i),l))}else l=0},t,"drag")},stop:function(t,e){n.stop(),k(),g("eventDragStop",s,i,t,e),l?c(this,i,l,0,i.allDay,t,e):(s.css("filter",""),m(i,s))}})},r.resizableDayEvent=function e(f,r,d){var v=h("isRTL")?"w":"e",t=r.find(".ui-resizable-"+v),a=!1;Zt(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){a&&(t.preventDefault(),t.stopImmediatePropagation())}),t.mousedown(function(t){if(1==t.which){a=!0;var i,s,e=F(),l=(w(),D(),r.css("top")),c=Nt.extend({},f),u=W(z(f.start));H(),Nt("body").css("cursor",v+"-resize").one("mouseup",function n(t){g("eventResizeStop",this,f,t),Nt("body").css("cursor",""),e.stop(),k(),i&&b(this,f,i,0,t);setTimeout(function(){a=!1},0)}),g("eventResizeStart",this,f,t),e.start(function(t,e){if(t){var n=R(e),r=R(t);if(r=Math.max(r,u),i=N(r)-N(n)){c.end=At(p(f),i,!0);var a=s;s=function o(t,n,r){var e=_([t],!0,!1),a=[];return B(e,function(t,e){t.row===n&&e.css("top",r),a.push(e[0])}),a}(c,d.row,l),(s=Nt(s)).find("*").css("cursor",v+"-resize"),a&&a.remove(),y(f)}else s&&(m(f),s.remove(),s=null);k(),x(f.start,At(jt(f),i))}},t)}})};var h=r.opt,g=r.trigger,s=r.isEventDraggable,l=r.isEventResizable,p=r.eventEnd,a=r.reportEventElement,o=r.eventElementHandlers,m=r.showEvents,y=r.hideEvents,c=r.eventDrop,b=r.eventResize,w=r.getRowCnt,D=r.getColCnt,C=(r.getColWidth,r.allDayRow),d=r.colLeft,M=r.colRight,E=r.colContentLeft,S=r.colContentRight,T=(r.dateToCell,r.getDaySegmentContainer),u=r.calendar.formatDates,x=r.renderDayOverlay,k=r.clearOverlays,H=r.clearSelection,F=r.getHoverListener,i=r.rangeToSegments,f=r.cellToDate,R=r.cellToCellOffset,N=r.cellOffsetToDayOffset,z=r.dateToDayOffset,W=r.dayOffsetToCellOffset;function _(t,e,n){var r,a,o=T(),i=e?Nt("<div/>"):o,s=function l(t){for(var e=[],n=0;n<t.length;n++){var r=A(t[n]);e.push.apply(e,r)}return e}(t);return function c(t){for(var e=h("isRTL"),n=0;n<t.length;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?E:d,o=(e?r.isStart:r.isEnd)?S:M,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}(s),r=function u(t){for(var e="",n=0;n<t.length;n++)e+=O(t[n]);return e}(s),i[0].innerHTML=r,a=i.children(),e&&o.append(a),function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.event,o=e.eq(n),i=g("eventRender",a,a,o);!1===i?o.remove():(i&&!0!==i&&(i=Nt(i).css({position:"absolute",left:r.left}),o.replaceWith(i),o=i),r.element=o)}}(s,a),B(s,function(t,e){t.hsides=Vt(e,!0)}),B(s,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),B(s,function(t,e){t.outerHeight=e.outerHeight(!0)}),function v(t,e){var n=function d(t){for(var e=w(),n=D(),r=[],a=function f(t){var e,n,r,a=w(),o=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=L(o[r]||[]);return o}(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=q(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(q(s))}return r}(t),r=function i(){var t,e=w(),n=[];for(t=0;t<e;t++)n[t]=C(t).find("div.fc-day-content > div");return n}(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(var o=0;o<r.length;o++)a.push(r[o].position().top);B(t,function(t,e){e.css("top",a[t.row]+t.top)})}(s,n),s}function A(t){for(var e=t.start,n=jt(t),r=i(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function O(t){var e="",n=h("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];s(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=Qt(r,h);return e+=a?"<a href='"+Ut(a)+"'":"<div",e+=" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+Ut(u(r.start,r.end,h("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+Ut(r.title||"")+"</span></div>",t.isEnd&&l(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(a?"a":"div")+">"}function L(t){for(var e=[],n=function o(t){t.sort(j);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&Y(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function v(t,e,n){s(t)&&r.draggableDayEvent(t,e,n),n.isEnd&&l(t)&&r.resizableDayEvent(t,e,n),o(t,e)}}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function B(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function j(t,e){return(e.event.priority||0)-(t.event.priority||0)||e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function ae(){var i=this;i.select=function d(t,e,n){u(),e||(e=r(t,n));l(t,e,n),f(t,e,n)},i.unselect=u,i.reportSelection=f,i.daySelectionMousedown=function v(t){var n=i.cellToDate,r=i.getIsCellAllDay,e=i.getHoverListener(),a=i.reportDayClick;if(1==t.which&&s("selectable")){u(t);var o;e.start(function(t,e){c(),t&&r(t)?(o=[n(e),n(t)].sort(Gt),l(o[0],o[1],!0)):o=null},t),Nt(document).one("mouseup",function(t){e.stop(),o&&(+o[0]==+o[1]&&a(o[0],!0,t),f(o[0],o[1],!0,t))})}};var s=i.opt,a=i.trigger,r=i.defaultSelectionEnd,l=i.renderSelection,c=i.clearSelection,o=!1;function u(t){o&&(o=!1,c(),a("unselect",null,t))}function f(t,e,n,r){o=!0,a("select",null,t,e,n,r)}s("selectable")&&s("unselectAuto")&&Nt(document).mousedown(function(t){var e=s("unselectCancel");e&&Nt(t.target).parents(e).length||u(t)})}function oe(){this.renderOverlay=function o(t,e){var n=a.shift();n||(n=Nt("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));n[0].parentNode!=e[0]&&n.appendTo(e);return r.push(n.css(t).show()),n},this.clearOverlays=function e(){var t;for(;t=r.shift();)a.push(t.hide().unbind())};var r=[],a=[]}function ie(t){var s,l;this.build=function(){t(s=[],l=[])},this.cell=function(t,e){var n,r=s.length,a=l.length,o=-1,i=-1;for(n=0;n<r;n++)if(e>=s[n][0]&&e<s[n][1]){o=n;break}for(n=0;n<a;n++)if(t>=l[n][0]&&t<l[n][1]){i=n;break}return 0<=o&&0<=i?{row:o,col:i}:null},this.rect=function(t,e,n,r,a){var o=a.offset();return{top:s[t][0]-o.top,left:l[e][0]-o.left,width:l[r][1]-l[e][0],height:s[n][1]-s[t][0]}}}function se(r){var a,o,i,s;function l(t){!function n(t){t.pageX===zt&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}(t);var e=r.cell(t.pageX,t.pageY);(!e!=!s||e&&(e.row!=s.row||e.col!=s.col))&&(e?(i||(i=e),o(e,i,e.row-i.row,e.col-i.col)):o(e,i),s=e)}this.start=function(t,e,n){o=t,i=s=null,r.build(),l(e),a=n||"mousemove",Nt(document).bind(a,l)},this.stop=function(){return Nt(document).unbind(a,l),s}}function le(e){var n=this,r={},a={},o={};function i(t){return r[t]=r[t]||e(t)}n.left=function(t){return a[t]=a[t]===zt?i(t).position().left:a[t]},n.right=function(t){return o[t]=o[t]===zt?n.left(t)+i(t).width():o[t]},n.clear=function(){r={},a={},o={}}}Q.dateFormatters=g,Q.applyAll=ft,tt.month=function y(t,e){var c=this;c.render=function g(t,e){e&&(ot(t,e),t.setDate(1));var n=u("firstDay"),r=Pt(t,!0);r.setDate(1);var a=ot(Pt(r),1),o=Pt(r);At(o,-(o.getDay()-n+7)%7),d(o);var i=Pt(a);At(i,(7-i.getDay()+n)%7),d(i,-1,!0);var s=v(),l=Math.round(Yt(i,o)/7);"fixed"==u("weekMode")&&(At(i,7*(6-l)),l=6);c.title=h(r,u("titleFormat")),c.start=r,c.end=a,c.visStart=o,c.visEnd=i,f(l,s,!0)},p.call(c,t,e,"month");var u=c.opt,f=c.renderBasic,d=c.skipHiddenDays,v=c.getCellsPerWeek,h=e.formatDate},tt.basicWeek=function b(t,e){var s=this;s.render=function v(t,e){e&&At(t,7*e);var n=At(Pt(t),-(t.getDay()-l("firstDay")+7)%7),r=At(Pt(n),7),a=Pt(n);u(a);var o=Pt(r);u(o,-1,!0);var i=f();s.start=n,s.end=r,s.visStart=a,s.visEnd=o,s.title=d(a,At(Pt(o),-1),l("titleFormat")),c(1,i,!1)},p.call(s,t,e,"basicWeek");var l=s.opt,c=s.renderBasic,u=s.skipHiddenDays,f=s.getCellsPerWeek,d=e.formatDates},tt.basicDay=function f(t,e){var a=this;a.render=function c(t,e){e&&At(t,e);s(t,e<0?-1:1);var n=Pt(t,!0),r=At(Pt(n),1);a.title=l(t,o("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=r,i(1,1,!1)},p.call(a,t,e,"basicDay");var o=a.opt,i=a.renderBasic,s=a.skipHiddenDays,l=e.formatDate},e({weekMode:"fixed"}),tt.agendaWeek=function w(t,e){var s=this;s.render=function v(t,e){e&&At(t,7*e);var n=At(Pt(t),-(t.getDay()-l("firstDay")+7)%7),r=At(Pt(n),7),a=Pt(n);u(a);var o=Pt(r);u(o,-1,!0);var i=f();s.title=d(a,At(Pt(o),-1),l("titleFormat")),s.start=n,s.end=r,s.visStart=a,s.visEnd=o,c(i)},m.call(s,t,e,"agendaWeek");var l=s.opt,c=s.renderAgenda,u=s.skipHiddenDays,f=s.getCellsPerWeek,d=e.formatDates},tt.agendaDay=function d(t,e){var a=this;a.render=function c(t,e){e&&At(t,e);s(t,e<0?-1:1);var n=Pt(t,!0),r=At(Pt(n),1);a.title=l(t,o("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=r,i(1)},m.call(a,t,e,"agendaDay");var o=a.opt,i=a.renderAgenda,s=a.skipHiddenDays,l=e.formatDate},e({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(t)}});