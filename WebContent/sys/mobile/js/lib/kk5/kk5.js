/*!
 * kkjs v1.3.17
 * Copyright© 2021 深圳市蓝凌软件股份有限公司版权所有
 */
!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return b(a)}):"object"==typeof exports?module.exports=b(a):a.Easymi=a.kk=b(a)}("undefined"!=typeof window?window:this,function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=[].slice,U={}.hasOwnProperty,V=function(a,b){return function(){return a.apply(b,arguments)}},W=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};return S=a.kk,n="",I=function(){var b,c,d;return d=null,b=function(){var a;if(a=Was.readyArgs,a.callArgs&&a.callArgs.__JSON__)try{a.callArgs=JSON.parse(a.callArgs.__JSON__)}catch(b){b,a.callArgs=a.callArgs.__JSON__}},c=function(c){a.Was&&Was.ready?(b(),Was.readyArgs.tokenReady=Was.SSOTokenReady,c(Was.readyArgs)):d?d.push(c):(d=[c],"undefined"!=typeof top&&null!==top&&top.addEventListener("kkJsBridgeReady",function(){var c,e;for(a.Was||(a.Was=top.Was),b(),e=Was.readyArgs,Was.readyArgs.tokenReady=Was.SSOTokenReady;c=d.shift();)c(e)}))},{ready:c,version:"1.3.17"}}(),I.noConflict=function(){return a.kk=S,I},I.isKK=function(){return/kkPlus/i.test(navigator.userAgent)},I.defy=function(){var a,b,c,d,e;if(c=arguments[0],a=2<=arguments.length?T.call(arguments,1):[],"string"==typeof c){e=c.split(".");try{for(b=I,d="";d=e.shift();)b=b[d];if("function"!=typeof b)throw new Error;c=b}catch(a){return a,I.Deferred.reject(-999,c+" is not function in KK")}}return new I.Deferred(function(b,d){var e,f,g,h;if(f=/^function\s+\w*\(([^)]+)\)/.exec(c.toString())){for(h=f[1].split(",").map(function(a){return a.trim()}),h=h.slice(-2),e=a.length;g=h.shift();)"done"===g?a.push(b):"fail"===g&&a.push(d);if(a.length>e)return void c.apply(null,a)}b(c.apply(null,a))})},Q=function(a,done){return function(){var b,c;b=1<=arguments.length?T.call(arguments,0):[],c="["+a+"][success]",e.detailLog&&(c+="[arguments]: "+JSON.stringify(b)),C.debug(c),"function"==typeof done&&done.apply(null,b)}},R=function(a,fail){return function(){var b,c;b=1<=arguments.length?T.call(arguments,0):[],c="["+a+"][fail]",e.detailLog&&(c+="[arguments]: "+JSON.stringify(b)),C.debug(c),"function"==typeof fail&&fail.apply(null,b)}},P={exec:function(){var b,c,done,d,fail;if(c=1<=arguments.length?T.call(arguments,0):[],b=c.shift(),done=c[3],c[3]=Q(b,done),fail=c[4],c[4]=R(b,fail),d="",I.isKK()?(a.Was||(a.Was=top.Was),a.Was&&Was.ready||(d="KK is not ready yet, JS API should be called in kk.ready. For more information, check http://kk5.landray.com.cn:6789/jssdk/index.html#ready")):d="KK JS APIs are only available in KK Mobile Apps. You should open your web app in KK Mobile App.",d)return a.console.warn(d),void c[4](-999,d);C.debug("["+b+"][call-arguments] : "+JSON.stringify(c[2])),Was.exec.apply(Was,c)}},M=x={noop:function(){},type:function(a,b){var c;return null!=a?(c=Object.prototype.toString.call(a),1===arguments.length?c.slice(8,-1):c.toLowerCase()===("[object "+b+"]").toLowerCase()):(c=String(a),arguments.length>1?c.toLowerCase()===String(b).toLowerCase():c)},isArray:Array.isArray||function(a){return M.type(a,"Array")},isWindow:function(a){return!(null==a||!a.window||a!==a.window)},isObject:function(a){return M.type(a,"Object")},isPlainObject:function(a){return M.isObject(a)&&!M.isWindow(a)&&Object.getPrototypeOf(a)===Object.prototype},splitURI:function(a){return(""+a).match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)},isURI:function(a){var b,c,d,e;if(!a)return!1;if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a))return!1;if(/%[^0-9a-f]/i.test(a))return!1;if(/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a))return!1;if(!(e=M.splitURI(a))||!e.length)return!1;if(d=e[1],b=e[2],c=e[3],!(d&&c.length>=0))return!1;if(b&&b.length){if(0!==c.length&&!/^\//.test(c))return!1}else if(/^\/\//.test(c))return!1;return!!/^[a-z][a-z0-9\+\-\.]*$/.test(d.toLowerCase())},isURL:function(a){var b,c,d;return!!M.isURI(a)&&(d=M.splitURI(a),c=d[1],b=d[2],!!c&&(!!/^https?$/i.test(c)&&!!b))},isEmpty:function(a){return null===a||void 0===a||""===a||M.isArray(a)&&!a.length},isFunction:function(a){return M.type(a,"Function")},extend:function(a,b){var c,d,e,f,g,h,i,j;for(c=[].slice.call(arguments),"boolean"==typeof c[0]?(e=c.shift(),a=c[0]):e=!1,i="boolean"!=typeof c[c.length-1]||c.pop(),g=1,1===c.length&&(a=M.isWindow(this)?{}:this,g=0),a||(a={});g<c.length;)if(b=c[g++])for(h in b)U.call(b,h)&&(j=b[h],!i&&h in a||(e&&j&&(M.isArray(j)||M.isPlainObject(j))?(f=a[h],d=M.isArray(j)?M.isArray(f)?f:[]:f&&M.isPlainObject(f)?f:{},a[h]=M.extend(e,d,j,i)):void 0!==j&&(a[h]=j)));return a},toQueryObjects:function(a,b,c){var d,e,f,g,h,i,j,k;if(d=M.toQueryObjects,f=[],M.isArray(b))if(c)for(e=h=0,j=b.length;h<j;e=++h)g=b[e],f=f.concat(d(a+"["+e+"]",g,!0));else for(e=i=0,k=b.length;i<k;e=++i)g=b[e],f.push({name:a,value:g});else if(M.isObject(b))if(c)for(e in b)U.call(b,e)&&(g=b[e],f=f.concat(d(a+"["+e+"]",g,!0)));else for(e in b)U.call(b,e)&&(g=b[e],f.push({name:a,value:g}));else f.push({name:a,value:b});return f},toQueryString:function(a){var b,c,d,e,f,g,h;e=[],d=[];for(b in a)U.call(a,b)&&(f=a[b],d=d.concat(M.toQueryObjects(b,f,!0)));for(g=0,h=d.length;g<h;g++)c=d[g],f=c.value,M.isEmpty(f)?f="":M.type(f,"Date")&&(f=M.formatTime(f)),e.push(encodeURIComponent(c.name)+"="+encodeURIComponent(String(f)));return e.join("&")},renameKeys:function(a,b,c){var d,e,f;if(!b||!a)return a;e=M.extend(!0,{},a);for(d in b)U.call(b,d)&&(f=b[d],void 0!==e[d]&&(void 0===e[f]&&(e[f]=e[d]),c&&delete e[d]));return e},parseTime:function(a){var b;return b=a.trim().match(/^(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/).map(function(a){return parseInt(a,10)}),new Date(b[1],b[2]-1,b[3],b[4],b[5],b[6])}},E=function(a,b){C.error("[kk api defaultFailCB]code:"+a+", msg:"+b)},N=function(a,b,c){if(null==c&&(c=!0),c){if(!M.type(a,"function"))return!1}else if(null!=a&&!M.type(a,"function"))return!1;return!(null!=b&&!M.type(b,"function"))},O=function(a){return a=(""+a).toLowerCase(),"jpg"===a&&(a="jpeg"),"jpeg"!==a&&"png"!==a&&(a="png"),a},I.utils=x,e={debug:!0,detailLog:!1},I.config=function(){var a,b,c,d;if(a=1<=arguments.length?T.call(arguments,0):[],!a.length)return M.extend({},e);if(c=a[0],d=typeof c,1!==a.length)return"string"===d&&c in e?e[c]=a[1]:void 0;if("string"===d)return e[c];if("object"===d){for(b in e)U.call(e,b)&&(e[b],b in c&&(e[b]=c[b]));return M.extend({},e)}},h=function(){function a(a){this.setSuccess=V(this.setSuccess,this),this.setError=V(this.setError,this);var b,c,d,e;this.chain=this.noop,this.resultGetter=null,c=this,e=function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],c.resolve.apply(c,a)},d=function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],c.reject.apply(c,a)};try{a&&a(e,d)}catch(a){b=a,d(b)}}return a.prototype.noop=function(){},a.prototype.processResult=function(a,b,c){var d;d=this,a[0]&&a[0].then?a[0].then(function(){var a;a=1<=arguments.length?T.call(arguments,0):[],d.processResult(a,b,c)}).catch(function(){var a;a=1<=arguments.length?T.call(arguments,0):[],d.processResult(a,c,c)}):b.apply(null,a)},a.prototype.setResult=function(a){this.resultGetter=function(done,fail){var b;try{a(done,fail)}catch(a){b=a,fail(b)}},this.chain(),this.chain=void 0},a.prototype.setError=function(){var a;a=1<=arguments.length?T.call(arguments,0):[],this.setResult(function(done,fail){fail.apply(null,a)})},a.prototype.setSuccess=function(){var a;a=1<=arguments.length?T.call(arguments,0):[],this.setResult(function(done){done.apply(null,a)})},a.prototype.buildChain=function(a,b){var c,d;d=this.chain,c=this,this.chain=function(){d(),c.resultGetter(a,b)}},a.prototype.resolve=function(){var a;a=1<=arguments.length?T.call(arguments,0):[],!this.resultGetter&&this.processResult(a,this.setSuccess,this.setError)},a.prototype.reject=function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],!this.resultGetter&&this.processResult(a,this.setError,this.setError)},a.prototype.then=function(done,fail){var b,c;return b=this,c=this.resultGetter?function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],b.resultGetter.apply(b,a)}:function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],b.buildChain.apply(b,a)},new a(function(a,b){c(function(){var b;return b=1<=arguments.length?T.call(arguments,0):[],"function"==typeof done?a(done.apply(null,b)):a.apply(null,b)},function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],"function"==typeof fail?b(fail.apply(null,a)):b.apply(null,a)})})},a.prototype.catch=function(a){return this.then(null,a)},a.prototype.done=function(a){return this.then(a)},a.prototype.always=function(a){return this.then(a,a)},a.prototype.finally=function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],this.always.apply(this,a)},a.prototype.fail=function(a){return this.then(null,a)},a.resolve=function(){var b;return b=1<=arguments.length?T.call(arguments,0):[],new a(function(a){return a.apply(null,b)})},a.reject=function(){var b;return b=1<=arguments.length?T.call(arguments,0):[],new a(function(a,c){return c.apply(null,b)})},a.race=function(b){return null==b&&(b=[]),new a(function(a,c){var d,e,f;if(!b.length)return a();for(e=0,f=b.length;e<f;e++)(d=b[e])&&d.then&&d.then(a,c)})},a.all=function(b){return null==b&&(b=[]),new a(function(a,c){var d,e,f,g,h,i,j;if(!(d=b.length))return a();for(e=function(){--d<=0&&a(b)},h=function(a,d){a&&a.then?a.then(function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],b[d]=a,e()},c):e()},f=i=0,j=b.length;i<j;f=++i)g=b[f],h(g,f)})},a}(),I.Deferred=I.Promise=h,C=function(){var b,c;return b=["log","debug","error","warn"],c={},a.console?b.forEach(function(b){c[b]=function(){var c;e.debug&&(a.console[b].apply(a.console,arguments),e.detailLog&&(c=new Event("kk-debug",{bubbles:!0,cancelable:!1}),c.data=arguments,window.dispatchEvent(c)))}}):b.forEach(function(a){c[a]=function(){}}),c}(),F={},B=function(a){var b;b="on"+a.charAt(0).toUpperCase()+a.slice(1),Was.addEventListener(b,function(){var b,c,d,f,g,h,i,j;if(b=1<=arguments.length?T.call(arguments,0):[],(d=F[a])&&d.length){for(f=a+" was triggered",e.detailLog&&(f+=", with params:"+JSON.stringify(b)),C.debug(f),g=void 0,h=void 0,i=0,j=d.length;i<j&&(c=d[i],h=c.apply(null,b),null!=h&&(g=h),!1!==g);i++);return!1===g?g:void 0}})},H={on:function(a,b){var c;"function"==typeof b&&(c=F[a],c?W.call(c,b)<0&&c.push(b):(F[a]=[b],B(a)))},off:function(a,b){var c,d;if((c=F[a])&&c.length&&"function"==typeof b)for(d=c.length;d--;)if(c[d]===b){c.splice(d,1);break}}},c={exit:function(){Was.exec("app","exitApp",{})},isOfflineApp:function(){return Was.appInfo&&"type"in Was.appInfo?1===parseInt(Was.appInfo.type,10):/^app.+kk$/.test(location.hostname)||/^(file|kkapp)/i.test(location.protocol)},callApp:function(a,b,done,fail){if("function"!=typeof b&&b||(fail=done,done=b,b=null),null!=b&&(b={__JSON__:JSON.stringify(b)}),N(done,fail,!1)){if(!a)return void fail(-1,"appInfo should not be empty");b||(b={}),"string"==typeof a&&(a=M.isURL(a)?{url:a}:{code:a}),a=M.renameKeys(a,{code:"__command",url:"__startUrl"}),b=M.extend(a,b),P.exec("app.callApp","app","callApp",b,done,fail)}},callNativeApp:function(a,done,fail){var b,c,d;if(N(done,fail,!1)){c={};for(b in a)U.call(a,b)&&(d=a[b],c["__"+b.replace(/^__/,"")]=d);c.__otherParam&&M.extend(c,L(c.__otherParam),!1),P.exec("app.callNativeApp","app","callNativeApp",c,done,fail)}},on:H.on,off:H.off,setAppCallBackData:function(a,done,fail){N(done,fail,!1)&&P.exec("app.setAppCallBackData","app","setAppCallBackData",a,done,fail)},setBadge:function(a,done,fail){N(done,fail,!1)&&P.exec("app.setBadge","message","setAppBadge",a,done,fail)},getBadge:function(done,fail){N(done,fail)&&P.exec("app.getBadge","message","getAppBadge",{},done,fail)},getNetState:function(){return{netState:Was.netState}},getDeviceInfo:function(){var a,b,c,d;return(a=Was.deviceInfo)?(b=a.pixel.split("x"),c=M.renameKeys(a,{deviceUUID:"deviceID"},!0),c=M.extend(c,{largerPixel:parseInt(b[0]),smallerPixel:parseInt(b[1])})):(d=window.screen,c={os:"windows",type:"pad",largerPixel:d.width,smallerPixel:d.height,pixel:d.width+"x"+d.height}),c},getUserInfo:function(){return j.getUserInfo()},getAppInfo:function(){return M.extend({},Was.appInfo)},getAppIcon:function(a){return a=a||Was.appInfo.code,n+"/serverj/getAppIcon?appCode="+encodeURIComponent(a)},showNativePage:function(a){return"setting"!==a&&"settings"!==a||(a="pushSettingView"),P.exec("app.showNativePage","nativeView",a,null,!0,E)},getClientInfo:function(){var a,b,c;return Was.kkClientInfo?(c=/^v?(\d(\.\d)+)/,a=M.renameKeys(Was.kkClientInfo,{version:"innerVersion"},!0),a=M.renameKeys(a,{visibleVersion:"version"},!0),b=c.exec(a.version),b&&(a.semver=b[1]),a):{}},getClientConfig:function(a,done,fail){N(done,fail)&&P.exec("app.getClientConfig","config","getConfigValue",{configName:a},function(a){return done(a.configValue)},fail)},setCookie:function(a,done,fail){N(done,fail,!1)&&P.exec("app.setCookie","cookie","setCookie",a,done,fail)},getCookie:function(a,done,fail){N(done,fail)&&P.exec("app.getCookie","cookie","getCookie",a,done,fail)},captureScreen:function(a,done,fail){var b;M.isFunction(a)&&(fail=done,done=a,a={}),N(done,fail)&&(b={targetWidth:100,targetHeight:100,encodingType:"png",quality:50,destinationType:"data"},a=M.extend({},b,a||{}),a.encodingType=O(a.encodingType),P.exec("app.captureScreen","app","screenCapture",a,function(b){"data"===a.destinationType&&(b.imageData="data:image/"+a.encodingType+";base64,"+b.imageData),done(b)},fail))},setScreenMode:function(a){var b;null==a&&(a="normal"),b={normal:1,enhanced:2,fullscreen:3},a=b[a]||a,P.exec("app.setScreenMode","app","config",{screenMode:a},null,null)},showTitleBar:function(){P.exec("app.showTitleBar","app","config",{isTitleBarVisible:!0},null,null)},hideTitleBar:function(){P.exec("app.hideTitleBar","app","config",{isTitleBarVisible:!1},null,null)},setTitle:function(a){""!==a&&(a=""+a,P.exec("app.setTitle","app","config",{title:a},null,null))},initSDK:function(a,done,fail){P.exec("app.initSDK","meeting","initSDK",a,done,fail)},enterMeeting:function(a,done,fail){P.exec("app.enterMeeting","meeting","enterMeeting",a,done,fail)},translate:function(a,done,fail){N(done,fail)&&P.exec("app.translate","lang","translate",a,done,fail)},launchWXMicroApp:function(a,done,fail){N(done,fail)&&P.exec("app.launchWXMicroApp","app","launchWXMicroApp",a,done,fail)},onUpdate:function(a,b){var c;I.app.onUpdate.triggered||(c="kk-app-"+I.app.getAppInfo().appID+"ver",a+="",I.app.onUpdate.triggered=!0,localStorage.getItem(c)!==a&&"function"==typeof b&&b(),localStorage.setItem(c,a))}},I.ready(function(){var a;a=c.getClientInfo(),a.webServer?n=a.webServer.replace(/\/$/,""):c.getClientConfig("kk_config_webserver_http_url",function(a){n=a&&a.replace(/\/$/,"")})}),L=function(a){var b,c,d,e;if(a){b=/^\d+\.\d+$/,d={};for(c in a)if(U.call(a,c))if(e=a[c],M.isArray(e))e.length&&"number"==typeof e[0]?b.test(e[0])?d[c]=String.fromCharCode(3)+"06"+e.join(String.fromCharCode(4)):d[c]=String.fromCharCode(3)+"05"+e.join(String.fromCharCode(4)):d[c]=String.fromCharCode(3)+"04"+e.join(String.fromCharCode(4));else if("number"==typeof e)b.test(e)?d[c]=String.fromCharCode(3)+"03"+e:d[c]=String.fromCharCode(3)+"02"+e;else if("string"==typeof e)switch(e.charAt(0)){case String.fromCharCode(128):d[c]=String.fromCharCode(3)+"08"+e.slice(1);break;case String.fromCharCode(129):d[c]=String.fromCharCode(3)+"09"+e.slice(1);break;default:d[c]=String.fromCharCode(3)+"01"+e}return d}},I.isKK()&&(window.close=c.exit),I.app=c,t=function(){var b,c,d,e,f;return e={},c={},f=function(b){var d,e,f,g,h;if(g=b[0],f=b[1]||{},"string"==typeof g)f.url=g;else{if(!M.isObject(g))return!1;f=g}return f=M.extend(!0,{method:"POST"},c,f),"function"==typeof f.beforeSend&&f.beforeSend(f),delete f.beforeSend,null==f.contentType&&(f.contentType=c.contentType||"form"),f.__url=f.url,f.__method=String(f.method).toUpperCase(),delete f.url,delete f.method,e=f.contentType&&"form"!==f.contentType?"json"===f.contentType?"application/json":f.contentType:"application/x-www-form-urlencoded",delete f.contentType,d=f.data||{_easymi_random_:(new Date).getTime()},delete f.data,"string"!=typeof d&&(d=e.indexOf("x-www-form-urlencoded")>-1?M.toQueryString(d):e.indexOf("application/json")>-1?JSON.stringify(d):String(d)),-1===e.indexOf("charset")&&(e=e.replace(/;?\s*$/,"; charset=UTF-8")),h=a.navigator.userAgent,window.Was&&window.Was.isEmulator&&(h+=" KKEmulator"),f["User-Agent"]=h,f["Content-Type"]=e,f.__content=d,null==f.headers&&(f.headers={}),M.extend(f,f.headers,!1),delete f.headers,f.failure=f.error||f.failure,delete f.error,f},e.requestSetup=function(a){return c=a||{},this},e.request=function(){var a,done,fail,c;return c=f([].slice.call(arguments)),N(c.success,c.failure,!1)?c.__url?(a=c.dataType,done=c.success,fail=c.failure,delete c.dataType,delete c.success,delete c.failure,new h(function(d,e){return P.exec("proxy.request","message","send",c,function(c){var f;if(null===(f=b(c,a)))return e(-1,"data from server isn't a valid json string");d(f.body,f)},e)}).then(done,fail)):h.reject("url is empty"):h.reject("illegal callback")},b=function(a,b){var c,d,e;if(c=a.content,"json"===b)try{c=JSON.parse(c)}catch(a){return a,null}if(e=a.headers)try{e=new Function("return "+e)()}catch(a){a,C.error("headers if not a valid js object "+e),e=[]}else e=[];return e=e.map(function(a){return a.name=a.name.toLowerCase(),a}),d=function(a){var b;if(a=String(a).toLowerCase(),b=e.filter(function(b){return b.name===a}).map(function(a){return a.value}),b.length)return 1===b.length?b[0]:b},{body:c,rawBody:a.content,rawHeaders:a.headers,headers:e,header:e,getHeader:d}},e.vueInterceptor=function(a,b){var c,d,f;f=a.url,a.params&&(d="object"==typeof a.params?M.toQueryString(a.params):a.params,/\?(.*)$/.test(a.url)?f+=RegExp.$1.length?"&":"":f+="?",f+=d),c={url:f,contentType:a.emulateJSON?"form":"json",headers:a.headers.map,data:a.body,dataType:"json"},e.request(c).then(function(c){b(a.respondWith(c,{status:200}))},function(c,d){b(a.respondWith({code:c,message:d},{status:400}))})},d={init:function(a,done,fail,b,c){if(this.options=a,this.plugin=b,this.methods=c,N(done,fail))return this.options.taskflag=!this.options.isContinuous,this.done=done,this.fail=fail,this},start:function(){return P.exec("proxy."+this.plugin+".start",this.plugin,this.methods[0],this.options,this.done,this.fail),this},pause:function(){return P.exec("proxy."+this.plugin+".pause/resume",this.plugin,this.methods[1],{url:this.options.url}),this},resume:function(){return this.start()},stop:function(){return P.exec("proxy."+this.plugin+".stop",this.plugin,this.methods[2],{url:this.options.url}),this}},e.Download=function(a,done,fail){this.init(a,done,fail,"download",["download","pausedown","stopdown"])},e.pausedown=function(a,done){P.exec("proxy.pausedown","download","pausedown",a,done)},e.stopdown=function(a,done){P.exec("proxy.stopdown","download","stopdown",a,done)},e.toDownloadRecordList=function(){P.exec("proxy.toDownloadRecordList","download","toDownloadRecordList")},e.getDownloadTaskFinishPart=function(a,done){P.exec("proxy.getDownloadTaskFinishPart","download","getTaskFinishPart",a,done)},e.getDownloadFileTaskInfo=function(a,done){P.exec("proxy.getDownloadFileTaskInfo","download","getFileTaskInfo",a,done)},M.extend(e.Download.prototype,d),e.Upload=function(a,done,fail){this.init(a,done,fail,"upload",["upload","pauseupload","stopupload"])},e.pauseupload=function(a,done){P.exec("proxy.pauseupload","upload","pauseupload",a,done)},e.stopupload=function(a,done){P.exec("proxy.stopupload","upload","stopupload",a,done)},e.getUploadTaskFinishPart=function(a,done){P.exec("proxy.getUploadTaskFinishPart","upload","getTaskFinishPart",a,done)},e.getUploadFileTaskInfo=function(a,done){P.exec("proxy.getUploadFileTaskInfo","upload","getFileTaskInfo",a,done)},M.extend(e.Upload.prototype,d),e.ekpUpload=function(a,done,fail){N(done,fail,!1)&&(a.userkey&&!a.token&&(a.token=a.userkey),P.exec("proxy.uploadView","ekpupload","upload",a,done,fail))},e.uploadView=e.ekpUpload,e}(),I.proxy=t,i={setOrientation:function(a){var b;b={portrait:1,landscape:2,auto:3},a=b[a]||a,P.exec("device.setOrientation","device","setOrientation",{orientation:a},!0,E)},getOrientation:function(done){N(done)&&P.exec("device.getOrientation","device","getOrientation",null,function(a){var b;b=["portrait","landscape","auto"],done(b[a.orientation-1])})},getNetType:function(done,fail){N(done,fail)&&P.exec("device.getNetType","device","getCurrentNetType",{},function(a){done(a)},fail)},getWifiInfo:function(done,fail){if(N(done,fail))return P.exec("device.getWifiInfo","device","getWifiInfo",{},function(a){done(a)},fail)},setClipboard:function(a){P.exec("device.setClipboard","device","setClipboardData",{data:a},null,null)},support:function(a,done){N(done)&&P.exec("device.support","device","checkSupport",{features:a},done,null)},startScanBeacons:function(a,done,fail){if(N(done,fail))return P.exec("device.startScanBeacons","device","startScanBeacons",a,done,fail)},stopScanBeacons:function(done,fail){if(N(done,fail))return P.exec("device.stopScanBeacons","device","stopScanBeacons",{},done,fail)},getBluetoothStatus:function(done,fail){if(N(done))return P.exec("device.getBluetoothStatus","device","getBluetoothStatus",{},done,fail)}},I.device=i,v={verifyFingerprint:function(done,fail){N(done,fail)&&P.exec("security.verifyFingerprint","crypto","checkFingerPrint",{},done,fail)},checkFace:function(done,fail){N(done,fail)&&P.exec("security.checkFace","crypto","checkFace",{},function(a){return a&&a.isFirst&&(a.isFirst=1===Number(a.isFirst)),done&&done(a)},fail)},checkGesturePassword:function(done,fail){N(done,fail)&&P.exec("security.checkGesturePassword","crypto","checkGesturePassword",{},done,fail)},getAvailableVerifyInfo:function(done){N(done)&&P.exec("security.getAvailableVerifyInfo","crypto","getAvailableVerifyInfo",{},done)},verifyIdentity:function(done,fail){N(done,fail)&&v.getAvailableVerifyInfo(function(a){return-1!==a.info.indexOf("1")?void v.verifyFingerprint(done,function(a,b){return a=4===a?1:2,fail(a,b)}):v.checkGesturePassword(done,function(a,b){1!==a&&(a=2),fail(a,b)})})}},I.security=v,q={showMenuItems:function(a){var b;b={isMenuButtonVisible:!0},null!=a&&(M.isArray(a)||(a=[a]),b.menuList=a),P.exec("menu.showMenuItems","app","config",b,null,null)},hideMenuItems:function(a){var b;b={isMenuButtonVisible:!1},null!=a&&(M.isArray(a)||(a=[a]),b.menuList=a),P.exec("menu.hideMenuItems","app","config",b,null,null)}},I.menu=q,p={getPicture:function(a,done,fail){var b;M.isFunction(a)&&(fail=done,done=a,a={}),N(done,fail)&&(b={sourceType:"camera",encodingType:"png",quality:50,destinationType:"file"},a=M.extend({},b,a||{}),a.encodingType=O(a.encodingType),M.isArray(a.savePath)&&(a.savePath=a.savePath.join(",")),a.resultFormat=1,P.exec("media.getPicture","image","getPicture",a,function(b){var c,d;if(b.mediaType&&"video"===b.mediaType)c=JSON.parse(b.videos),c=c.map(function(a){return a.mediaType=b.mediaType,a}),done(c);else{if(d=[],b.pictures)try{d=new Function("return "+b.pictures)()}catch(a){return a,C.warn("failed to transform pictures to array: "+b.pictures),void fail(-1,"invalid arguments from native")}else d=[b];d=d.map(function(b){return"data"===a.destinationType&&(b.imageData="data:image/"+a.encodingType+";base64,"+b.imageData),b.imagePath&&(b.imageFileOSPath=b.imagePath),b.mediaType="image",b.imageTime&&(b.imageTimeString=b.imageTime,b.imageTime=M.parseTime(b.imageTime)),b}),done(void 0===a.count&&1===d.length?d[0]:d)}},fail))},getMultiPicture:function(a,done,fail){var b;N(done,fail)&&(b={targetWidth:100,targetHeight:100,encodingType:"jpeg",quality:50,limitTime:-1},a=M.extend({},b,a),a.exifFlag=!1,M.isArray(a.savePath)&&(a.savePath=a.savePath.join(",")),a.encodingType=O(a.encodingType),P.exec("media.getMultiPicture","image","getMultiCameraPics",a,function(a){done({imageURI:a.imageURI.split(","),imageFileOSPath:a.imageFileOSPath.split(",")})},fail))},editImage:function(a,done,fail){if(N(done,fail,!0))return P.exec("media.editImage","image","editImage",a,done,fail)},save2album:function(a,done,fail){var b;b=a.uri||a.filepath,M.isURL(b)||/^base64?:\/\//.test(b)?(a.fileURI=b,delete a.filepath):a.filepath=b,N(done,fail,!1)&&P.exec("media.save2album","image","save2album",a,done,fail)},previewImage:function(a,done,fail){a&&(M.isArray(a.paths)&&(a.paths=a.paths.join(",")),N(done,fail,!1)&&(a=M.renameKeys(a,{operations:"operation"},!0),a.operation=a.operation?1:0,P.exec("media.previewImage","image","gallery",a,done,fail)))},captureVideo:function(a,done,fail){var b;M.isFunction(a)&&(fail=done,done=a,a={}),N(done,fail)&&(b={quality:"LOW"},a=M.extend({},b,a||{}),P.exec("media.captureVideo","media","captureVideo",a,done,fail))},captureAudio:function(done,fail){N(done,fail)&&P.exec("media.captureAudio","media","captureAudioView",{},done,fail)},playAudio:function(a,fail){var b;b=N(null,fail,!1),b[0],fail=b[1],P.exec("media.playAudio","media","playAudioView",{fileurl:a},!0,fail)},getSignImage:function(a,done,fail){var b;N(done,fail)&&(b={penSize:2,penColor:"black"},a=M.extend({},b,a||{}),P.exec("media.getSignImage","image","getSignImage",a,done,fail))},captureMicroVideo:function(a,done,fail){N(done,fail)&&P.exec("media.captureMicroVideo","media","captureMicroVideo",a,done,fail)}},I.media=p,b={startVoiceRecognition:function(done,fail){var a;N(done,fail)&&(a=["identifying","finish","fail"],P.exec("ai.startVoiceRecognition","ai","startVoiceRecognition",{},function(b){var c;return b&&(c=parseInt(b.state,10),b.state=a[c-1]||""),done&&done(b)},fail))},stopVoiceRecognition:function(fail){M.isFunction(fail)||(fail=E),P.exec("ai.stopVoiceRecognition","ai","stopVoiceRecognition",{},null,fail)},setAudioMute:function(a){a=a||!1,P.exec("ai.setAudioMute","ai","setAudioMute",{mute:a},null,null)},getAudioMute:function(done){if(N(done))return P.exec("ai.getAudioMute","ai","getAudioMute",null,function(a){done(a.mute)})}},I.ai=b,k=function(){function a(a){this.fileName=a}return a.prototype.getOSPath=function(done,fail){return G.getOSPath(this.fileName,done,fail)},a.prototype.info=function(done,fail){return G.getFileInfo(this.fileName,done,fail)},a.prototype.exists=function(done,fail){return G.exists(this.fileName,done,fail)},a.prototype.exist=a.prototype.exists,a.prototype.remove=function(done,fail){return G.remove(this.fileName,done,fail)},a.prototype.view=function(a,done,fail){return M.type(a,"function")?(fail=done,done=a,a=this.fileName):a=M.extend(!0,a,{filepath:this.fileName}),G.view(a,done,fail)},a.prototype.readAsText=function(a,done,fail){var b;return M.isFunction(a)&&(fail=done,done=a,a="utf-8"),b={filepath:this.fileName,encoding:a},G.readAsText(b,done,fail)},a.prototype.readAsBase64=function(done,fail){return G.readAsBase64(this.fileName,done,fail)},a.prototype.copyTo=function(a,done,fail){var b;return b={source:this.fileName,target:a},G.copy(b,done,fail)},a}(),I.File=k,G={getOSPath:function(a,done,fail){N(done,fail)&&P.exec("file.getOSPath","file","getFileOSPath",{EasyMIPath:a},done,fail)},getFileInfo:function(a,done,fail){N(done,fail)&&P.exec("file.getFileInfo","file","info",{filepath:a},function(a){a.isDir=1==+a.isDir,done(a)},fail)},exists:function(a,done,fail){if(N(done,fail))return P.exec("file.exists","file","exists",{filepath:a},done,function(a,b){C.debug("[file][exist][failCB]"+a+", "+b),1===a?done({exists:!1}):fail(a,b)})},remove:function(a,done,fail){if(N(done,fail,!1))return P.exec("file.remove","file","delete",{filepath:a,needConfirm:0},done,fail)},view:function(a,done,fail){var b,c,d;if(N(done,fail,!1))switch(c={},M.type(a,"string")&&(a={filepath:a},M.isURL(a.filepath)&&(a.useWebview=!0)),M.isURL(a.filepath)&&(a.mimeType="text/html"),a=M.extend(!0,c,a),a.via){case"wps":d={readonly:0,edit:1},a.mode=d[a.mode]||d.readonly,delete a.via,delete a.title,delete a.mimeType,b=["open","save","close"],P.exec("file.view","wps","openFile",a,function(a){var c;return a&&(c=parseInt(a.operation,10),a.operation=b[c-1]||""),done&&done(a)},fail);break;case"pdf":delete a.via,delete a.title,delete a.mimeType,b=["open","save","close"],P.exec("file.view","wps","signPDF",a,function(a){var c;return a&&(c=parseInt(a.operation,10),a.operation=b[c-1]||""),done&&done(a)},fail);break;default:null!=a.via&&("webview"===a.via?a.useWebview=!0:delete a.useWebview),P.exec("file.view","file","viewdoc",a,done,fail)}},readAsText:function(a,done,fail){var b;if(N(done,fail)){if(b={encode:"utf-8"},M.type(a,"string"))b.filepath=a;else{if(!M.type(a,"object"))return;b=M.extend(!0,b,a)}a=M.extend(!0,{},b),a.encoding&&(a.encode=a.encoding),P.exec("file.readAsText","file","getFileContent",a,done,fail)}},readAsBase64:function(a,done,fail){if(N(done,fail))return P.exec("file.readAsBase64","file","getFileContent",{filepath:a,filetype:2},done,fail)},copy:function(a,done,fail){N(done,fail,!1)&&P.exec("file.copy","file","copy",a,done,fail)},chooseFile:function(done,fail){N(done,fail)&&P.exec("file.chooseFile","file","chooseFile",{},done,fail)},chooseFileMulti:function(done,fail){N(done,fail)&&P.exec("file.chooseFileMulti","file","chooseFileMulti",{},done,fail)},canUseJinGe:function(done,fail){N(done,fail)&&P.exec("file.canUseJinGe","wps","canUseJinGe",{},function(a){return a&&(a.office=!Boolean(parseInt(a.office,10)-1),a.pdf=!Boolean(parseInt(a.pdf,10)-1)),done&&done(a)},fail)},saveFileContent:function(a,done,fail){N(done,fail)&&P.exec("file.saveFileContent","file","saveFileContent",a,done,fail)},onlineReadFile:function(a,done,fail){P.exec("file.onlineReadFile","file","onlineReadFile",a,done,fail)},getOnlineReadUrl:function(a,done,fail){N(done,fail)&&P.exec("file.getOnlineReadUrl","file","getOnlineReadUrl",a,done,fail)}},I.file=G,f={add:function(a,done,fail){N(done,fail,!1)&&P.exec("contact.add","contact","add",a,done,fail)},remove:function(a,done,fail){N(done,fail,!1)&&P.exec("contact.remove","contact","delete",{id:a},done,fail)},update:function(a,done,fail){N(done,fail,!1)&&P.exec("contact.update","contact","update",a,done,fail)},find:function(a,done,fail){N(done,fail)&&P.exec("contact.find","contact","find",a,function(a){var b,c,d,e,f;for(b=[],e=a.count,d=0;d<e;)c="return "+a["record"+d],f=new Function(c)(),b.push(f),++d;done(b)},fail)},choose:function(a,done,fail){var b;if(b={mode:1},"function"==typeof a&&(fail=done,done=a,a={}),a=M.extend(b,a),N(done,fail))return P.exec("contact.choose","contact","choose",a,function(a){var b;b=new Function("return "+a.contactors)(),done(b)},fail)}},I.contact=f,u={scanBarCode:function(done,fail){N(done,fail)&&P.exec("scaner.scanBarCode","barcode","getBarcode",{},done,fail)},scanQRCode:function(done,fail){N(done,fail)&&P.exec("scaner.scanQRCode","barcode","getTdBarcode",{},done,fail)},getQRCode:function(a,done,fail){N(done,fail)&&P.exec("scaner.getQRCode","barcode","genQRCode",a,function(b){"data"===a.destinationType&&(b.imageData="data:image/png;base64,"+b.imageData),done(b)},fail)}},u.scanTDCode=u.scanQRCode,D=function(a,b){return function(c,done,fail){switch(typeof c){case"function":fail=done,done=c,c={};break;case"string":c={hintMsg:c};break;default:c=M.renameKeys(c,{hint:"hintMsg"},!0)}N(done,fail)&&P.exec("scaner."+a,"ocr",a,c,function(a){a=b?b(a):a,done(a)},fail)}},u.scanIDCard=D("scanIDCard",function(a){return a&&"string"==typeof a.isFront&&(a.isFront="1"===a.isFront),a}),u.scanVLCard=D("scanVLCard"),u.scanDLCard=D("scanDLCard"),u.scanBankCard=D("scanBankCard"),u.scanText=D("scanText"),I.scaner=u,j={choose:function(a,done,fail){var b;M.isFunction(a)&&(fail=done,done=a,a={}),N(done,fail)&&(b={initList:[],isSticky:!1,stickyList:[],maxCount:0,isSelfSticky:!1},a=M.extend(b,a||{}),M.isArray(a.initList)&&(a.initList=a.initList.join(",")),a.initList=String(a.initList),M.isArray(a.stickyList)&&(a.stickyList=a.stickyList.join(",")),a.stickyList=String(a.stickyList),P.exec("econtact.choose","contactor","chooseContactors",a,function(a){done(K(a))},fail))},chooseGroupPerson:function(a,done,fail){a.stickyList=a.stickyList.join(","),P.exec("econtact.choose","contactor","chooseGroupPerson",a,function(a){done(K(a))},fail)},getUserInfoById:function(){var a;return a=1<=arguments.length?T.call(arguments,0):[],a[0]&&(a[0]={userList:a[0]}),j.getUserInfo.apply(j,a)},getUserInfo:function(a,done,fail){var b;if(b={type:"userID",userList:Was.userInfo.userID},0===arguments.length)return Was.userInfo.loginName||(Was.userInfo.loginName=Was.userInfo.userName),M.extend({},Was.userInfo);if(M.type(a,"function"))fail=null,M.type(done,"function")&&(fail=done),done=a,a={};else if(M.type(a,"object")){if(!N(done,fail))return}else{if(!N(done,fail))return;a={userList:a}}a=M.extend(!0,b,a),M.isArray(a.userList)||(a.userList=[a.userList]),a.ids=a.userList.join(","),P.exec("econtact.getUserInfo","contactor","getContactorDetail",a,function(a){done(K(a))},fail)},getUserAvatar:function(a,b){var c;return M.type(a,"boolean")&&(a=!1),b=a&&b,a=a||Was.userInfo.loginName,c=b?"userId=":"user=",n+"/serverj/readUserIcon?"+c+encodeURIComponent(a)},startChat:function(a,done,fail){a=M.renameKeys(a,{userID:"recieverID",loginName:"recieverName"}),N(done,fail,!1)&&P.exec("econtact.startChat","im","sendP2P",a,done,fail)},showECard:function(a,done,fail){a=M.renameKeys(a,{userID:"personID",loginName:"personName"}),N(done,fail,!1)&&P.exec("econtact.showECard","contactor","showPersonDetailView",a,done,fail)},sendGroup:function(a,done,fail){N(done,fail,!1)&&P.exec("econtact.sendGroup","im","sendGroup",a,done,fail)},createBizGroup:function(a,done,fail){N(done,fail,!1)&&(M.type(a.time,"string")&&(a.time=a.time.replace(/[^0-9]/g,"")),M.type(a.users,"array")&&(a.users=a.users.join(",")),P.exec("econtact.createBizGroup","im","createBizGroup",a,done,fail))},isBizGroupExists:function(a,done,fail){N(done,fail)&&P.exec("econtact.isBizGroupExists","im","isBizGroupExists",a,done,fail)},genBizGroupChatMsgUrl:function(a,done,fail){N(done,fail)&&(M.type(a.endTime,"string")&&(a.endTime=a.endTime.replace(/[^0-9]/g,"")),P.exec("econtact.genBizGroupChatMsgUrl","im","genBizGroupChatMsgUrl",a,done,fail))},genSessionChatMsgUrl:function(a,done,fail){N(done,fail)&&P.exec("econtact.genSessionChatMsgUrl","im","genSessionChatMsgUrl",a,done,fail)},getRelSession:function(done,fail){N(done,fail)&&P.exec("econtact.getRelSession","im","getRelSession",{},done,fail)},isSessionMemberByMsg:function(a,done,fail){N(done,fail)&&P.exec("econtact.isSessionMemberByMsg","im","isSessionMemberByMsg",a,done,fail)}},K=function(a){return a&&a.contactors?(a=new Function("return "+a.contactors)(),a=a.map(function(a){return a.deptPath=a.deptPath?a.deptPath.split(String.fromCharCode(3)):[],a.jobTitle=a.job,a.signature=a.sign,delete a.sign,delete a.job,a})):a=[],a},I.econtact=j,g={encrypt:function(a,done,fail){N(done,fail)&&P.exec("crypto.encrypt","crypto","AESEncode",a,done,fail)},decrypt:function(a,done,fail){N(done,fail)&&P.exec("crypto.decrypt","crypto","AESDecode",a,done,fail)},obscureFile:function(a,done,fail){N(done,fail,!1)&&P.exec("crypto.obscureFile","crypto","obscureFile",a,done,fail)},restoreFile:function(a,done,fail){N(done,fail,!1)&&P.exec("crypto.restoreFile","crypto","restoreFile",a,done,fail)}},I.crypto=g,o={getLocation:function(a,done,fail){M.isFunction(a)?(fail=done,done=a,a={type:"Cell"}):M.isEmpty(a)?a={type:"Cell"}:M.isEmpty(a.type)&&(a.type="Cell"),P.exec("location.getLocation","location","locate",a,done,fail)},navigate:function(a,done,fail){N(done,fail,!1)&&P.exec("location.navigate","location","navigate",a,done,fail)},navigateDirectly:function(a,done,fail){N(done,fail,!1)&&P.exec("location.navigateDirectly","location","navigateDirectly",a,done,fail)},startSubmitLocation:function(a,done,fail){N(done,fail,!1)&&P.exec("location.startSubmitLocation","location","startSubmitLocation",a,done,fail)},stopSubmitLocation:function(done,fail){N(done,fail,!1)&&P.exec("location.stopSubmitLocation","location","stopSubmitLocation",null,done,fail)}},I.location=o,w={to:function(a,b,done,fail){var c,d,e;if(d={user:1,group:2,session:3,discuss:4},e={text:1,card:10,biz:11,file:2},c={type:"card",showChooseView:!0},!b||M.type(b,"function")?(fail=done,done=b,b={url:I.app.isOfflineApp()?w.getAppShareLink():location.href}):M.type(b,"string")&&(M.isURL(b)?b={url:b}:"kk"===a&&(b={content:b,type:"text"})),!M.type(b,"object"))return void fail(-6,"参数错误");if(N(done,fail,!1))switch(b=M.extend(!0,{},c,b),b.type=e[b.type]||1,b.content&&!b.summary&&(b.summary=b.content),a){case"weixin":"moments"===b.shareTo?b.shareTo="weixin_friends":b.shareTo="weixin_msg",P.exec("share.to","share","shareUrl",b,done,function(a,b){switch(a){case 3:return fail(-1,b);default:return fail(a,b)}});break;case"kk":return b.recieverType&&(b.recieverType=d[b.recieverType]),b.recieverList&&(b.recieverList=[].concat(b.recieverList).join(",")),b.type,b.imageUri&&(b.picUrl=b.imageUri),b.url&&(b.linkUrl=b.url),void P.exec("share.to","im","send",b,done,fail);default:fail(-6,"参数错误")}},appMessage:function(a,done,fail){var b,c;if(N(done,fail,!1))return b=M.extend(!0,{},a,{type:"card"}),c=M.extend(!0,{},b),delete c.type,delete c.title,delete c.content,delete c.recieverType,delete c.recieverList,delete c.showChooseView,b.linkUrl=b.linkUrl||w.getAppShareLink(c),delete b.data,w.to("kk",b,done,fail)},getAppShareLink:function(a){var b,c,d;return c=M.extend(!0,{},a),c.data&&(c.data=JSON.stringify(c.data)),d=M.extend(!0,{targetType:"universal",targetPlatform:"mobile"},c,{appCode:Was.appInfo.code,appName:Was.appInfo.name}),b=n+"/serverj/open-kk-app/index.html",b+="?"+M.toQueryString(d)},shareImage:function(a,done,fail){N(done,fail)&&P.exec("share.shareImage","share","shareImage",a,done,fail)}},I.share=w,r={weixin:function(a,done,fail){var b;N(done,fail)&&(b={},a=M.extend(b,a||{}),P.exec("pay.weixin","pay","weixinAppPay",a,done,fail))}},I.pay=r,d={addEvent:function(a,done,fail){N(done,fail,!0)&&(M.type(a.startT,"string")&&(a.startT=a.startT.replace(/[^0-9]/g,"")),12===a.startT.length&&(a.startT+="00"),M.type(a.endT,"string")&&(a.endT=a.endT.replace(/[^0-9]/g,"")),12===a.endT.length&&(a.endT+="00"),M.type(a.repeatEndValue,"string")&&(a.repeatEndValue=a.repeatEndValue.replace(/[^0-9]/g,"")),M.isArray(a.alarms)&&(a.alarms=a.alarms.join(",")),M.isArray(a.daysOfWeek)&&(a.daysOfWeek=a.daysOfWeek.join(",")),a.allDay=Number(a.allDay),P.exec("calendar.addEvent","calendar","addCalendarEvent",a,done,fail))}},I.calendar=d,s={call:function(a,done,fail){var b;N(done,fail,!1)&&(b=a,"number"==typeof a&&(b={number:a}),b&&(b.needCallSessionInfo=Number(b.needCallSessionInfo)||0),P.exec("phone.call","phone","call",b,function(a){b.needCallSessionInfo&&a&&2===(a.callState=Number(a.callState)||1)&&(a.startTimeString=a.startTime,a.startTime=M.parseTime(a.startTime),a.endTimeString=a.endTime,a.endTime=M.parseTime(a.endTime)),done&&done(a)},fail))},sms:function(a,b){var c;null==b&&(b=""),c={number:a,content:b},P.exec("phone.sms","sms","send",c)}},I.phone=s,A={zip:function(a,done,fail){N(done,fail,!1)&&(a.folderPath&&(a.FolderPath=a.folderPath),a.filePaths&&(M.isArray(a.filePaths)&&(a.filePaths=a.filePaths.join(",")),a.toZipFiles=a.filePaths),P.exec("zip.zip","zip","zip",a,done,fail))},unzip:function(a,done,fail){N(done,fail,!1)&&P.exec("zip.unzip","zip","unzip",{zipFilePath:a.zipFilePath,outPath:a.outPath},done,fail)}},I.zip=A,l={canGo:function(done){N(done)&&P.exec("history.canGo","app","canGo",{},done,E)},hasPrev:function(done){N(done)&&l.canGo(function(a){done({hasPrev:a.canGoBack})})},back:function(fail){M.isFunction(fail)||(fail=E),P.exec("history.back","app","goBack",{},null,fail)},forward:function(fail){M.isFunction(fail)||(fail=E),P.exec("history.forward","app","goForward",{},null,fail)}},I.history=l,m={chooseByWeixin:function(done,fail){N(done,fail)&&P.exec("invoice.chooseByWeixin","invoice","chooseByWeixin",{},function(a){return a&&(a.item_list=JSON.parse(a.item_list)),done&&done(a)},fail)},chooseByAlipay:function(done,fail){N(done,fail)&&P.exec("invoice.chooseByAlipay","invoice","chooseByAlipay",{},function(a){return a&&(a.invoice_element_list=JSON.parse(a.invoice_element_list)),done&&done(a)},fail)}},I.invoice=m,y={init:function(done,fail){N(done,fail,!1)&&P.exec("workspace.init","workspace","load",null,done,fail)},getUserApps:function(done,fail){N(done,fail)&&P.exec("workspace.getUserApps","workspace","getUserFavoriteApps",null,function(a){done(a.data.map(J))},fail)},launchApp:function(a,done,fail){N(done,fail,!1)&&P.exec("workspace.launchApp","workspace","launchApp",a,done,fail)},downloadApp:function(a,done,fail){N(done,fail,!1)&&P.exec("workspace.downloadApp","workspace","downloadApp",a,done,fail)},installApp:function(a,done,fail){N(done,fail,!1)&&P.exec("workspace.installApp","workspace","installApp",a,done,fail)},getAds:function(done,fail){N(done,fail)&&P.exec("workspace.getAds","workspace","getAds",null,function(a){return done(a.data)},fail)}},J=function(a){var b,c;return c=["","hybird","native","hidden","online"],b=["","notdownload","normal","hasnew","notinstall"],a.type=c[a.type]||"ERROR-TYPE",a.status=b[a.status]||"ERROR-STATUS",a},I.workspace=y,z=function(){var a,b;return function(fail){return function(a,b){M.isFunction(fail)?fail({errMsg:b,code:a}):E(a,b)}},a=null,b={ready:function(a){I.ready(a)},error:function(){},checkJsApi:function(a){var c,d,e,f,g;for(c=a.jsApiList,e={},f=0,g=c.length;f<g;f++)d=c[f],e[d]=!!b[d];a.success({checkResult:e,errMsg:"checkJsApi:ok"})},previewImage:function(a){a.current&&(a.current=a.urls.indexOf(current)),a.paths=a.urls,a.current=a.current||0,I.media.previewImage(a)},startRecord:function(){I.media.captureAudio(function(b){"function"==typeof a&&a(b),a=null})},stopRecord:function(b){a=b.success},onVoiceRecordEnd:function(){},playVoice:function(a){I.media.playAudio(a.localId)},getNetworkType:function(a){I.device.getNetType(function(b){a.success({networkType:b.netType.toLowerCase()})})},getLocation:function(a){I.location.getLocation(a.success)},closeWindow:function(){I.app.exit()},scanQRCode:function(a){var b;b=a.scanType,b=b?b[0]:"qrCode",b="barCode"===b?"scanBarCode":"scanTDCode",I.scaner[b](function(b){"function"==typeof a.success&&a.success({resultStr:b.code})})}},b.kk=!0,b}(),I.wx=z,I});